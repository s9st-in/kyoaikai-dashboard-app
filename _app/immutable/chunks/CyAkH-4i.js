import{ad as m,ae as S,af as h,ag as T,z as v,ah as L,A as F,G as k,ai as A,aj as C}from"./Dj_qSXc_.js";class z{anchor;#e=new Map;#o=new Map;#t=new Map;#s=new Set;#r=!0;constructor(t,e=!0){this.anchor=t,this.#r=e}#i=()=>{var t=m;if(this.#e.has(t)){var e=this.#e.get(t),s=this.#o.get(e);if(s)S(s),this.#s.delete(e);else{var o=this.#t.get(e);o&&(this.#o.set(e,o.effect),this.#t.delete(e),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),s=o.effect)}for(const[i,n]of this.#e){if(this.#e.delete(i),i===t)break;const l=this.#t.get(n);l&&(h(l.effect),this.#t.delete(n))}for(const[i,n]of this.#o){if(i===e||this.#s.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var f=document.createDocumentFragment();A(n,f),f.append(v()),this.#t.set(i,{effect:n,fragment:f})}else h(n);this.#s.delete(i),this.#o.delete(i)};this.#r||!s?(this.#s.add(i),T(n,l,!1)):l()}}};#n=t=>{this.#e.delete(t);const e=Array.from(this.#e.values());for(const[s,o]of this.#t)e.includes(s)||(h(o.effect),this.#t.delete(s))};ensure(t,e){var s=m,o=C();if(e&&!this.#o.has(t)&&!this.#t.has(t))if(o){var i=document.createDocumentFragment(),n=v();i.append(n),this.#t.set(t,{effect:L(()=>e(n)),fragment:i})}else this.#o.set(t,L(()=>e(this.anchor)));if(this.#e.set(s,t),o){for(const[l,p]of this.#o)l===t?s.unskip_effect(p):s.skip_effect(p);for(const[l,p]of this.#t)l===t?s.unskip_effect(p.effect):s.skip_effect(p.effect);s.oncommit(this.#i),s.ondiscard(this.#n)}else F&&(this.anchor=k),this.#i()}}const c={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},w={silent:{level:-1},fatal:{level:c.fatal},error:{level:c.error},warn:{level:c.warn},log:{level:c.log},info:{level:c.info},success:{level:c.success},fail:{level:c.fail},ready:{level:c.info},start:{level:c.info},box:{level:c.info},debug:{level:c.debug},trace:{level:c.trace},verbose:{level:c.verbose}};function u(r){if(r===null||typeof r!="object")return!1;const t=Object.getPrototypeOf(r);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in r?!1:Symbol.toStringTag in r?Object.prototype.toString.call(r)==="[object Module]":!0}function _(r,t,e=".",s){if(!u(t))return _(r,{},e);const o=Object.assign({},t);for(const i in r){if(i==="__proto__"||i==="constructor")continue;const n=r[i];n!=null&&(Array.isArray(n)&&Array.isArray(o[i])?o[i]=[...n,...o[i]]:u(n)&&u(o[i])?o[i]=_(n,o[i],(e?`${e}.`:"")+i.toString()):o[i]=n)}return o}function E(r){return(...t)=>t.reduce((e,s)=>_(e,s,""),{})}const M=E();function I(r){return Object.prototype.toString.call(r)==="[object Object]"}function D(r){return!(!I(r)||!r.message&&!r.args||r.stack)}let g=!1;const b=[];class a{options;_lastLog;_mockFn;constructor(t={}){const e=t.types||w;this.options=M({...t,defaults:{...t.defaults},level:d(t.level,e),reporters:[...t.reporters||[]]},{types:w,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const s in e){const o={type:s,...this.options.defaults,...e[s]};this[s]=this._wrapLogFn(o),this[s].raw=this._wrapLogFn(o,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(t){this.options.level=d(t,this.options.types,this.options.level)}prompt(t,e){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(t,e)}create(t){const e=new a({...this.options,...t});return this._mockFn&&e.mockTypes(this._mockFn),e}withDefaults(t){return this.create({...this.options,defaults:{...this.options.defaults,...t}})}withTag(t){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+t:t})}addReporter(t){return this.options.reporters.push(t),this}removeReporter(t){if(t){const e=this.options.reporters.indexOf(t);if(e!==-1)return this.options.reporters.splice(e,1)}else this.options.reporters.splice(0);return this}setReporters(t){return this.options.reporters=Array.isArray(t)?t:[t],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const t in this.options.types)console["__"+t]||(console["__"+t]=console[t]),console[t]=this[t].raw}restoreConsole(){for(const t in this.options.types)console["__"+t]&&(console[t]=console["__"+t],delete console["__"+t])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(t,e){t&&(t.__write||(t.__write=t.write),t.write=s=>{this[e].raw(String(s).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(t){t&&t.__write&&(t.write=t.__write,delete t.__write)}pauseLogs(){g=!0}resumeLogs(){g=!1;const t=b.splice(0);for(const e of t)e[0]._logFn(e[1],e[2])}mockTypes(t){const e=t||this.options.mockFn;if(this._mockFn=e,typeof e=="function")for(const s in this.options.types)this[s]=e(s,this.options.types[s])||this[s],this[s].raw=this[s]}_wrapLogFn(t,e){return(...s)=>{if(g){b.push([this,t,s,e]);return}return this._logFn(t,s,e)}}_logFn(t,e,s){if((t.level||0)>this.level)return!1;const o={date:new Date,args:[],...t,level:d(t.level,this.options.types)};!s&&e.length===1&&D(e[0])?Object.assign(o,e[0]):o.args=[...e],o.message&&(o.args.unshift(o.message),delete o.message),o.additional&&(Array.isArray(o.additional)||(o.additional=o.additional.split(`
`)),o.args.push(`
`+o.additional.join(`
`)),delete o.additional),o.type=typeof o.type=="string"?o.type.toLowerCase():"log",o.tag=typeof o.tag=="string"?o.tag:"";const i=(l=!1)=>{const p=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&p>0){const f=[...this._lastLog.object.args];p>1&&f.push(`(repeated ${p} times)`),this._log({...this._lastLog.object,args:f}),this._lastLog.count=1}l&&(this._lastLog.object=o,this._log(o))};clearTimeout(this._lastLog.timeout);const n=this._lastLog.time&&o.date?o.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=o.date,n<this.options.throttle)try{const l=JSON.stringify([o.type,o.tag,o.args]),p=this._lastLog.serialized===l;if(this._lastLog.serialized=l,p&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(i,this.options.throttle);return}}catch{}i(!0)}_log(t){for(const e of this.options.reporters)e.log(t,{options:this.options})}}function d(r,t={},e=3){return r===void 0?e:typeof r=="number"?r:t[r]&&t[r].level!==void 0?t[r].level:e}a.prototype.add=a.prototype.addReporter;a.prototype.remove=a.prototype.removeReporter;a.prototype.clear=a.prototype.removeReporter;a.prototype.withScope=a.prototype.withTag;a.prototype.mock=a.prototype.mockTypes;a.prototype.pause=a.prototype.pauseLogs;a.prototype.resume=a.prototype.resumeLogs;function O(r={}){return new a(r)}class N{options;defaultColor;levelColorMap;typeColorMap;constructor(t){this.options={...t},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(t){return t<1?console.__error||console.error:t===1?console.__warn||console.warn:console.__log||console.log}log(t){const e=this._getLogFn(t.level),s=t.type==="log"?"":t.type,o=t.tag||"",n=`
      background: ${this.typeColorMap[t.type]||this.levelColorMap[t.level]||this.defaultColor};
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `,l=`%c${[o,s].filter(Boolean).join(":")}`;typeof t.args[0]=="string"?e(`${l}%c ${t.args[0]}`,n,"",...t.args.slice(1)):e(l,n,...t.args)}}function j(r={}){return O({reporters:r.reporters||[new N({})],prompt(e,s={}){return s.type==="confirm"?Promise.resolve(confirm(e)):Promise.resolve(prompt(e))},...r})}const P=j(),y={MIN:0,MAX:5,PRODUCTION_DEFAULT:3},R=y.PRODUCTION_DEFAULT,$=()=>{const r=parseInt("",10);return!isNaN(r)&&r>=y.MIN&&r<=y.MAX?r:R},G=P.create({level:$(),formatOptions:{colors:!0,date:!0}}).withTag("browser"),U="2025-04-01",X=600*1e3,B={THEME_PREFIX:"theme:",SINAGE_SETTINGS_PREFIX:"sinage:settings:"};function H(r){return`${B.THEME_PREFIX}${r}`}export{z as B,X as D,U as M,B as S,H as g,G as l};

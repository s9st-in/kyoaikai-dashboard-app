import{c as z,w as J,r as w,u as K,a as tt,b as et,d as U,s as A,e as st,t as it,f as W,A as nt,g as I,h as ot,i as rt,j as at,M as ct,T as j}from"./YvPky1bd.js";var lt=tt("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),O=lt.build(),ut=t=>`toast-group:${t}`,H=(t,e)=>t.getById(`toast-group:${e}`),q=t=>`toast:${t.id}`,$=t=>t.getById(q(t)),L=t=>`toast:${t.id}:title`,G=t=>`toast:${t.id}:description`,gt=t=>`toast${t.id}:close`,V={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function C(t,e){return t??V[e]??V.DEFAULT}var dt=t=>typeof t=="string"?{left:t,right:t,bottom:t,top:t}:t;function pt(t,e){const{prop:i,computed:s,context:n}=t,{offsets:a,gap:c}=i("store").attrs,u=n.get("heights"),l=dt(a),y=i("dir")==="rtl",g=e.replace("-start",y?"-right":"-left").replace("-end",y?"-left":"-right"),d=g.includes("right"),T=g.includes("left"),m={position:"fixed",pointerEvents:s("count")>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${c}px`,"--first-height":`${u[0]?.height||0}px`,"--viewport-offset-left":l.left,"--viewport-offset-right":l.right,"--viewport-offset-top":l.top,"--viewport-offset-bottom":l.bottom,zIndex:ct};let f="center";if(d&&(f="flex-end"),T&&(f="flex-start"),m.alignItems=f,g.includes("top")){const h=l.top;m.top=`max(env(safe-area-inset-top, 0px), ${h})`}if(g.includes("bottom")){const h=l.bottom;m.bottom=`max(env(safe-area-inset-bottom, 0px), ${h})`}if(!g.includes("left")){const h=l.right;m.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${h})`}if(!g.includes("right")){const h=l.left;m.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${h})`}return m}function mt(t,e){const{prop:i,context:s,computed:n}=t,a=i("parent"),c=a.computed("placement"),{gap:u}=a.prop("store").attrs,[l]=c.split("-"),y=s.get("mounted"),g=s.get("remainingTime"),d=n("height"),T=n("frontmost"),m=!T,f=!i("stacked"),h=i("stacked"),k=i("type")==="loading"?Number.MAX_SAFE_INTEGER:g,M=n("heightIndex")*u+n("heightBefore"),x={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${i("removeDelay")}ms`,"--duration":`${k}ms`,"--initial-height":`${d}px`,"--offset":`${M}px`,"--index":i("index"),"--z-index":n("zIndex"),"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},p=N=>Object.assign(x,N);return l==="top"?p({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):l==="bottom"&&p({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),y&&(p({"--y":"0","--opacity":"1"}),h&&p({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),e||p({"--opacity":"0",pointerEvents:"none"}),m&&f&&(p({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),e||p({"--y":"calc(var(--sign) * 40%)"})),m&&h&&!e&&p({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),T&&!e&&p({"--y":"calc(var(--lift) * -100%)"}),x}function ft(t,e){const{computed:i}=t,s={position:"absolute",inset:"0",scale:"1 2",pointerEvents:e?"none":"auto"},n=a=>Object.assign(s,a);return i("frontmost")&&!e&&n({height:"calc(var(--initial-height) + 80%)"}),s}function ht(){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function yt(t,e){const{context:i,prop:s,send:n,refs:a,computed:c}=t;return{getCount(){return i.get("toasts").length},getToasts(){return i.get("toasts")},getGroupProps(u={}){const{label:l="Notifications"}=u,{hotkey:y}=s("store").attrs,g=y.join("+").replace(/Key/g,"").replace(/Digit/g,""),d=c("placement"),[T,m="center"]=d.split("-");return e.element({...O.group.attrs,dir:s("dir"),tabIndex:-1,"aria-label":`${d} ${l} ${g}`,id:ut(d),"data-placement":d,"data-side":T,"data-align":m,"aria-live":"polite",role:"region",style:pt(t,d),onMouseEnter(){a.get("ignoreMouseTimer").isActive()||n({type:"REGION.POINTER_ENTER",placement:d})},onMouseMove(){a.get("ignoreMouseTimer").isActive()||n({type:"REGION.POINTER_ENTER",placement:d})},onMouseLeave(){a.get("ignoreMouseTimer").isActive()||n({type:"REGION.POINTER_LEAVE",placement:d})},onFocus(f){n({type:"REGION.FOCUS",target:f.relatedTarget})},onBlur(f){a.get("isFocusWithin")&&!at(f.currentTarget,f.relatedTarget)&&queueMicrotask(()=>n({type:"REGION.BLUR"}))}})},subscribe(u){return s("store").subscribe(()=>u(i.get("toasts")))}}}var{guards:Tt,createMachine:Et}=rt(),{and:vt}=Tt,bt=Et({props({props:t}){return{dir:"ltr",id:K(),...t,store:t.store}},initialState({prop:t}){return t("store").attrs.overlap?"overlap":"stack"},refs(){return{lastFocusedEl:null,isFocusWithin:!1,isPointerWithin:!1,ignoreMouseTimer:nt.create(),dismissableCleanup:void 0}},context({bindable:t}){return{toasts:t(()=>({defaultValue:[],sync:!0,hash:e=>e.map(i=>i.id).join(",")})),heights:t(()=>({defaultValue:[],sync:!0}))}},computed:{count:({context:t})=>t.get("toasts").length,overlap:({prop:t})=>t("store").attrs.overlap,placement:({prop:t})=>t("store").attrs.placement},effects:["subscribeToStore","trackDocumentVisibility","trackHotKeyPress"],watch({track:t,context:e,action:i}){t([()=>e.hash("toasts")],()=>{queueMicrotask(()=>{i(["collapsedIfEmpty","setDismissableBranch"])})})},exit:["clearDismissableBranch","clearLastFocusedEl","clearMouseEventTimer"],on:{"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:vt("isOverlapping","isPointerOut"),target:"overlap",actions:["collapseToasts","resumeToasts","restoreFocusIfPointerOut"]},{guard:"isPointerOut",target:"stack",actions:["resumeToasts","restoreFocusIfPointerOut"]},{actions:["clearFocusWithin"]}],"TOAST.REMOVE":{actions:["removeToast","removeHeight","ignoreMouseEventsTemporarily"]},"TOAST.PAUSE":{actions:["pauseToasts"]}},states:{stack:{on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["clearPointerWithin","resumeToasts","collapseToasts"]},{actions:["clearPointerWithin","resumeToasts"]}],"REGION.OVERLAP":{target:"overlap",actions:["collapseToasts"]},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["setPointerWithin","pauseToasts"]}}},overlap:{on:{"REGION.STACK":{target:"stack",actions:["expandToasts"]},"REGION.POINTER_ENTER":{target:"stack",actions:["setPointerWithin","pauseToasts","expandToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts","expandToasts"]}}}},implementations:{guards:{isOverlapping:({computed:t})=>t("overlap"),isPointerOut:({refs:t})=>!t.get("isPointerWithin")},effects:{subscribeToStore({context:t,prop:e}){return e("store").subscribe(i=>{if(i.dismiss){t.set("toasts",s=>s.filter(n=>n.id!==i.id));return}t.set("toasts",s=>{const n=s.findIndex(a=>a.id===i.id);return n!==-1?[...s.slice(0,n),{...s[n],...i},...s.slice(n+1)]:[i,...s]})})},trackHotKeyPress({prop:t,send:e}){return W(document,"keydown",s=>{const{hotkey:n}=t("store").attrs;n.every(c=>s[c]||s.code===c)&&e({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility({prop:t,send:e,scope:i}){const{pauseOnPageIdle:s}=t("store").attrs;if(!s)return;const n=i.getDoc();return W(n,"visibilitychange",()=>{const a=n.visibilityState==="hidden";e({type:a?"PAUSE_ALL":"RESUME_ALL"})})}},actions:{setDismissableBranch({refs:t,context:e,computed:i,scope:s}){const n=e.get("toasts"),a=i("placement"),c=n.length>0;if(!c){t.get("dismissableCleanup")?.();return}if(c&&t.get("dismissableCleanup"))return;const l=it(()=>H(s,a),{defer:!0});t.set("dismissableCleanup",l)},clearDismissableBranch({refs:t}){t.get("dismissableCleanup")?.()},focusRegionEl({scope:t,computed:e}){queueMicrotask(()=>{H(t,e("placement"))?.focus()})},pauseToasts({prop:t}){t("store").pause()},resumeToasts({prop:t}){t("store").resume()},expandToasts({prop:t}){t("store").expand()},collapseToasts({prop:t}){t("store").collapse()},removeToast({prop:t,event:e}){t("store").remove(e.id)},removeHeight({event:t,context:e}){t?.id!=null&&queueMicrotask(()=>{e.set("heights",i=>i.filter(s=>s.id!==t.id))})},collapsedIfEmpty({send:t,computed:e}){!e("overlap")||e("count")>1||t({type:"REGION.OVERLAP"})},setLastFocusedEl({refs:t,event:e}){t.get("isFocusWithin")||!e.target||(t.set("isFocusWithin",!0),t.set("lastFocusedEl",e.target))},restoreFocusIfPointerOut({refs:t}){!t.get("lastFocusedEl")||t.get("isPointerWithin")||(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null),t.set("isFocusWithin",!1))},setPointerWithin({refs:t}){t.set("isPointerWithin",!0)},clearPointerWithin({refs:t}){t.set("isPointerWithin",!1),t.get("lastFocusedEl")&&!t.get("isFocusWithin")&&(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null))},clearFocusWithin({refs:t}){t.set("isFocusWithin",!1)},clearLastFocusedEl({refs:t}){t.get("lastFocusedEl")&&(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null),t.set("isFocusWithin",!1))},ignoreMouseEventsTemporarily({refs:t}){t.get("ignoreMouseTimer").request()},clearMouseEventTimer({refs:t}){t.get("ignoreMouseTimer").cancel()}}}});function At(t,e){const{state:i,send:s,prop:n,scope:a,context:c,computed:u}=t,l=i.hasTag("visible"),y=i.hasTag("paused"),g=c.get("mounted"),d=u("frontmost"),T=n("parent").computed("placement"),m=n("type"),f=n("stacked"),h=n("title"),R=n("description"),k=n("action"),[M,x="center"]=T.split("-");return{type:m,title:h,description:R,placement:T,visible:l,paused:y,closable:!!n("closable"),pause(){s({type:"PAUSE"})},resume(){s({type:"RESUME"})},dismiss(){s({type:"DISMISS",src:"programmatic"})},getRootProps(){return e.element({...O.root.attrs,dir:n("dir"),id:q(a),"data-state":l?"open":"closed","data-type":m,"data-placement":T,"data-align":x,"data-side":M,"data-mounted":I(g),"data-paused":I(y),"data-first":I(d),"data-sibling":I(!d),"data-stack":I(f),"data-overlap":I(!f),role:"status","aria-atomic":"true","aria-describedby":R?G(a):void 0,"aria-labelledby":h?L(a):void 0,tabIndex:0,style:mt(t,l),onKeyDown(p){p.defaultPrevented||p.key=="Escape"&&(s({type:"DISMISS",src:"keyboard"}),p.preventDefault())}})},getGhostBeforeProps(){return e.element({"data-ghost":"before",style:ft(t,l)})},getGhostAfterProps(){return e.element({"data-ghost":"after",style:ht()})},getTitleProps(){return e.element({...O.title.attrs,id:L(a)})},getDescriptionProps(){return e.element({...O.description.attrs,id:G(a)})},getActionTriggerProps(){return e.button({...O.actionTrigger.attrs,type:"button",onClick(p){p.defaultPrevented||(k?.onClick?.(),s({type:"DISMISS",src:"user"}))}})},getCloseTriggerProps(){return e.button({id:gt(a),...O.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(p){p.defaultPrevented||s({type:"DISMISS",src:"user"})}})}}}var{not:St}=ot(),Ct=et({props({props:t}){return st(t,["id","type","parent","removeDelay"],"toast"),{closable:!0,...t,duration:C(t.duration,t.type)}},initialState({prop:t}){return t("type")==="loading"||t("duration")===1/0?"visible:persist":"visible"},context({prop:t,bindable:e}){return{remainingTime:e(()=>({defaultValue:C(t("duration"),t("type"))})),createdAt:e(()=>({defaultValue:Date.now()})),mounted:e(()=>({defaultValue:!1})),initialHeight:e(()=>({defaultValue:0}))}},refs(){return{closeTimerStartTime:Date.now(),lastCloseStartTimerStartTime:0}},computed:{zIndex:({prop:t})=>{const e=t("parent").context.get("toasts"),i=e.findIndex(s=>s.id===t("id"));return e.length-i},height:({prop:t})=>t("parent").context.get("heights").find(s=>s.id===t("id"))?.height??0,heightIndex:({prop:t})=>t("parent").context.get("heights").findIndex(i=>i.id===t("id")),frontmost:({prop:t})=>t("index")===0,heightBefore:({prop:t})=>{const e=t("parent").context.get("heights"),i=e.findIndex(s=>s.id===t("id"));return e.reduce((s,n,a)=>a>=i?s:s+n.height,0)},shouldPersist:({prop:t})=>t("type")==="loading"||t("duration")===1/0},watch({track:t,prop:e,send:i}){t([()=>e("message")],()=>{const s=e("message");s&&i({type:s,src:"programmatic"})}),t([()=>e("type"),()=>e("duration")],()=>{i({type:"UPDATE"})})},on:{UPDATE:[{guard:"shouldPersist",target:"visible:persist",actions:["resetCloseTimer"]},{target:"visible:updating",actions:["resetCloseTimer"]}],MEASURE:{actions:["measureHeight"]}},entry:["setMounted","measureHeight","invokeOnVisible"],effects:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],effects:["waitForNextTick"],on:{SHOW:{target:"visible"}}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:St("isLoadingType"),target:"visible",actions:["setCloseTimer"]},DISMISS:{target:"dismissing"}}},visible:{tags:["visible"],effects:["waitForDuration"],on:{DISMISS:{target:"dismissing"},PAUSE:{target:"visible:persist",actions:["syncRemainingTime"]}}},dismissing:{entry:["invokeOnDismiss"],effects:["waitForRemoveDelay"],on:{REMOVE:{target:"unmounted",actions:["notifyParentToRemove"]}}},unmounted:{entry:["invokeOnUnmount"]}},implementations:{effects:{waitForRemoveDelay({prop:t,send:e}){return A(()=>{e({type:"REMOVE",src:"timer"})},t("removeDelay"))},waitForDuration({send:t,context:e,computed:i}){if(!i("shouldPersist"))return A(()=>{t({type:"DISMISS",src:"timer"})},e.get("remainingTime"))},waitForNextTick({send:t}){return A(()=>{t({type:"SHOW",src:"timer"})},0)},trackHeight({scope:t,prop:e}){let i;return U(()=>{const s=$(t);if(!s)return;const n=()=>{const u=s.style.height;s.style.height="auto";const l=s.getBoundingClientRect().height;s.style.height=u;const y={id:e("id"),height:l};B(e("parent"),y)},a=t.getWin(),c=new a.MutationObserver(n);c.observe(s,{childList:!0,subtree:!0,characterData:!0}),i=()=>c.disconnect()}),()=>i?.()}},guards:{isLoadingType:({prop:t})=>t("type")==="loading",shouldPersist:({computed:t})=>t("shouldPersist")},actions:{setMounted({context:t}){U(()=>{t.set("mounted",!0)})},measureHeight({scope:t,prop:e,context:i}){queueMicrotask(()=>{const s=$(t);if(!s)return;const n=s.style.height;s.style.height="auto";const a=s.getBoundingClientRect().height;s.style.height=n,i.set("initialHeight",a);const c={id:e("id"),height:a};B(e("parent"),c)})},setCloseTimer({refs:t}){t.set("closeTimerStartTime",Date.now())},resetCloseTimer({context:t,refs:e,prop:i}){e.set("closeTimerStartTime",Date.now()),t.set("remainingTime",C(i("duration"),i("type")))},syncRemainingTime({context:t,refs:e}){t.set("remainingTime",i=>{const s=e.get("closeTimerStartTime"),n=Date.now()-s;return e.set("lastCloseStartTimerStartTime",Date.now()),i-n})},notifyParentToRemove({prop:t}){t("parent").send({type:"TOAST.REMOVE",id:t("id")})},invokeOnDismiss({prop:t,event:e}){t("onStatusChange")?.({status:"dismissing",src:e.src})},invokeOnUnmount({prop:t}){t("onStatusChange")?.({status:"unmounted"})},invokeOnVisible({prop:t}){t("onStatusChange")?.({status:"visible"})}}}});function B(t,e){const{id:i,height:s}=e;t.context.set("heights",n=>n.find(c=>c.id===i)?n.map(c=>c.id===i?{...c,height:s}:c):[{id:i,height:s},...n])}var It=(t,e)=>({...e,...z(t)});function X(t={}){const e=It(t,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let i=[],s=[],n=new Set,a=[];const c=o=>(i.push(o),()=>{const r=i.indexOf(o);i.splice(r,1)}),u=o=>(i.forEach(r=>r(o)),o),l=o=>{if(s.length>=e.max){a.push(o);return}u(o),s.unshift(o)},y=()=>{for(;a.length>0&&s.length<e.max;){const o=a.shift();o&&(u(o),s.unshift(o))}},g=o=>{const r=o.id??`toast:${K()}`,b=s.find(E=>E.id===r);return n.has(r)&&n.delete(r),b?s=s.map(E=>E.id===r?u({...E,...o,id:r}):E):l({id:r,duration:e.duration,removeDelay:e.removeDelay,type:"info",...o,stacked:!e.overlap,gap:e.gap}),r},d=o=>(n.add(o),o?(i.forEach(r=>r({id:o,dismiss:!0})),s=s.filter(r=>r.id!==o),y()):(s.forEach(r=>{i.forEach(b=>b({id:r.id,dismiss:!0}))}),s=[],a=[]),o);return{attrs:e,subscribe:c,create:g,update:(o,r)=>g({id:o,...r}),remove:d,dismiss:o=>{o!=null?s=s.map(r=>r.id===o?u({...r,message:"DISMISS"}):r):s=s.map(r=>u({...r,message:"DISMISS"}))},error:o=>g({...o,type:"error"}),success:o=>g({...o,type:"success"}),info:o=>g({...o,type:"info"}),warning:o=>g({...o,type:"warning"}),loading:o=>g({...o,type:"loading"}),getVisibleToasts:()=>s.filter(o=>!n.has(o.id)),getCount:()=>s.length,promise:(o,r,b={})=>{if(!r||!r.loading){J("[zag-js > toast] toaster.promise() requires at least a 'loading' option to be specified");return}const E=g({...b,...r.loading,promise:o,type:"loading"});let F=!0,P;const Z=w(o).then(async v=>{if(P=["resolve",v],Ot(v)&&!v.ok){F=!1;const S=w(r.error,`HTTP Error! status: ${v.status}`);g({...b,...S,id:E,type:"error"})}else if(r.success!==void 0){F=!1;const S=w(r.success,v);g({...b,...S,id:E,type:"success"})}}).catch(async v=>{if(P=["reject",v],r.error!==void 0){F=!1;const S=w(r.error,v);g({...b,...S,id:E,type:"error"})}}).finally(()=>{F&&d(E),r.finally?.()});return{id:E,unwrap:()=>new Promise((v,S)=>Z.then(()=>P[0]==="reject"?S(P[1]):v(P[1])).catch(S))}},pause:o=>{o!=null?s=s.map(r=>r.id===o?u({...r,message:"PAUSE"}):r):s=s.map(r=>u({...r,message:"PAUSE"}))},resume:o=>{o!=null?s=s.map(r=>r.id===o?u({...r,message:"RESUME"}):r):s=s.map(r=>u({...r,message:"RESUME"}))},isVisible:o=>!n.has(o)&&!!s.find(r=>r.id===o),isDismissed:o=>n.has(o),expand:()=>{s=s.map(o=>u({...o,stacked:!0}))},collapse:()=>{s=s.map(o=>u({...o,stacked:!1}))}}}var Ot=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Nt={connect:yt,machine:bt};const _=2e3,D=new Map;function Q(t,e){const i=`${t}::${e??""}`,s=Date.now(),n=D.get(i);if(n!=null&&s-n<_)return!0;if(D.set(i,s),D.size>50)for(const[a,c]of D)s-c>=_&&D.delete(a);return!1}const Y=X({placement:"top-end"}),Ut=X({placement:"bottom"});function Wt(t,e){Q(t,e)||Y.success({title:t,description:e,duration:j.SUCCESS})}function Ht(t,e){Q(t,e)||Y.error({title:t,description:e,duration:j.ERROR})}export{Ut as a,Wt as b,At as c,Ht as d,Nt as g,Ct as m,Y as t};

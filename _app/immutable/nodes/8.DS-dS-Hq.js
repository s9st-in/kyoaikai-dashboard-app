import{r as X}from"../chunks/zt0KaRHz.js";import{b as $}from"../chunks/P7rPqgRT.js";import"../chunks/BhIsClV-.js";import{p as z,i as ee,s as te}from"../chunks/OQgd7Oh0.js";import"../chunks/DsnmJJEf.js";import{s as C,c as l,r as i,t as V,a as g,f as x,p as B,g as e,b as E,u as b,k as H,d as A,l as ae,n as re,j as ie,h as N,i as W,e as se,$ as le}from"../chunks/p4dYvpg6.js";import{s as D,d as oe,a as de}from"../chunks/T2Bmc5lN.js";import{i as S}from"../chunks/36Dr0qmW.js";import{h as ne}from"../chunks/COZkYLhp.js";import"../chunks/Dh3huXxZ.js";import"../chunks/aTZK_S6W.js";import{e as O,T as ce,C as ve}from"../chunks/CS60pbwF.js";import"../chunks/CQy8OeFy.js";import{F as ue}from"../chunks/oulXoRit.js";import{s as Z}from"../chunks/BcvOLtEm.js";import{a as U,c as ge,s as Y}from"../chunks/Cq4yWqvx.js";import{S as fe,T as me,a as pe}from"../chunks/Djjv-p_d.js";import"../chunks/C3ChFxzh.js";import{M as J}from"../chunks/BYYwbIbG.js";import"../chunks/xh2F44ca.js";import{T as q,u as be,c as xe,a as he}from"../chunks/B3FzVGZu.js";import"../chunks/CuRQ2e7u.js";var ye=x('<p class="text-tertiary mt-1 text-sm"> </p>'),_e=x('<div class="flex flex-col items-center justify-center gap-3 p-6 text-center"><div class="bg-surface-secondary rounded-full p-4"><svg class="text-tertiary h-10 w-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h3 class="text-primary text-lg font-semibold"> </h3> <!></div></div>');function K(a,t){var d=_e(),r=C(l(d),2),s=l(r),c=l(s,!0);i(s);var n=C(s,2);{var f=h=>{var m=ye(),p=l(m,!0);i(m),V(()=>D(p,t.description)),g(h,m)};S(n,h=>{t.description&&h(f)})}i(r),i(d),V(()=>D(c,t.title)),g(a,d)}const Ce={戸畑共立病院:"共立",戸畑リハビリテーション病院:"リハ",あやめの里:"あやめ",明治町クリニック:"明治町"};function we(a){return Ce[a]??a}function ke(a){const{itemCount:t=0,minColumns:d=1,maxColumns:r=4}=a;{const s=Math.min(Math.max(t,d),r);return Te(s)}}function Te(a){switch(a){case 1:return"grid-cols-1";case 2:return"grid-cols-1 sm:grid-cols-2";case 3:return"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3";case 4:return"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4";default:return"grid-cols-1 sm:grid-cols-2"}}function Me(a){const{columns:t,itemCount:d=0}=a;if(t==="auto"){const r=d;return r===1?"grid-cols-1":r===2?"grid-cols-1 lg:grid-cols-2":r===3?"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3":"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4"}switch(t){case 1:return"grid-cols-1";case 2:return"grid-cols-1 md:grid-cols-2";case 3:return"grid-cols-1 md:grid-cols-2 xl:grid-cols-3";case 4:return"grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4";default:return"grid-cols-1 lg:grid-cols-2"}}function Ve(a){return{sm:"gap-2",md:"gap-4",lg:"gap-6"}[a.gap]||"gap-4"}var Se=x("<div></div>");function Fe(a,t){B(t,!0);let d=z(t,"columns",3,"auto"),r=z(t,"gap",3,"md");const s=b(()=>Ve({gap:r()})),c=b(()=>Me({columns:d(),itemCount:t.items.length}));var n=Se();O(n,21,()=>t.items,f=>f.key,(f,h)=>{var m=H(),p=A(m);Z(p,()=>t.item,()=>e(h)),g(f,m)}),i(n),V(()=>U(n,1,`grid ${e(c)??""} ${e(s)??""}`)),g(a,n),E()}var Ie=x('<p class="text-tertiary mt-1 text-sm"> </p>'),je=x('<span class="ml-3 inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-800"> </span>'),Pe=x('<div class="border-divider bg-card flex h-full flex-col overflow-hidden rounded-lg border shadow-sm"><div class="border-divider bg-page border-b px-5 py-4 dark:bg-slate-700"><div class="flex items-start justify-between"><div class="flex-1"><h2 class="text-primary text-lg font-semibold"> </h2> <!></div> <!></div></div> <div class="flex-1 overflow-auto p-5"><!></div></div>');function De(a,t){var d=Pe(),r=l(d),s=l(r),c=l(s),n=l(c),f=l(n,!0);i(n);var h=C(n,2);{var m=o=>{var u=Ie(),v=l(u,!0);i(u),V(()=>D(v,t.subtitle)),g(o,u)};S(h,o=>{t.subtitle&&o(m)})}i(c);var p=C(c,2);{var y=o=>{var u=je(),v=l(u,!0);i(u),V(()=>D(v,t.badge)),g(o,u)};S(p,o=>{t.badge&&o(y)})}i(s),i(r);var w=C(r,2),M=l(w);Z(M,()=>t.children),i(w),i(d),V(()=>D(f,t.title)),g(a,d)}var Ge=x("<div><!></div>"),Ae=x('<section class="relative"><!> <div><!></div></section>');function ze(a,t){let d=z(t,"stickyHeader",3,!1),r=z(t,"headerZIndex",3,10);const s=b(()=>d()?`sticky top-0 z-[${r()}]`:"");var c=Ae(),n=l(c);{var f=p=>{var y=Ge(),w=l(y);Z(w,()=>t.header),i(y),V(()=>U(y,1,ge(e(s)))),g(p,y)};S(n,p=>{t.header&&p(f)})}var h=C(n,2),m=l(h);Z(m,()=>t.children),i(h),i(c),g(a,c)}const Be=async()=>{X(302,`${$}/board/kyoritsu`);try{return{facilities:await ee.fetch()??[]}}catch{return{facilities:[]}}},Ct=Object.freeze(Object.defineProperty({__proto__:null,load:Be},Symbol.toStringTag,{value:"Module"})),Q=[{label:"使用病床数",unit:"床",getValue:a=>a.kpis.usedBeds,formatDetail:a=>`${a.kpis.usedBeds} / ${a.beds} 床`,getGaugeValue:a=>a.beds>0?a.kpis.usedBeds/a.beds*100:0},{label:"外来患者数",unit:"人",getValue:a=>a.kpis.outpatients},{label:"入院患者数",unit:"人",getValue:a=>a.kpis.inpatients},{label:"平均在院日数",unit:"日",getValue:a=>a.kpis.avgStayDays},{label:"スタッフ稼働率",unit:"%",getValue:a=>a.kpis.staffUtilization,getGaugeValue:a=>a.kpis.staffUtilization}];var Ee=x('<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3" role="region" aria-label="施設の主要指標"></div>');function Re(a,t){var d=Ee();O(d,21,()=>Q,r=>r.label,(r,s)=>{{let c=b(()=>e(s).formatDetail?.(t.facility)??`${e(s).getValue(t.facility)} ${e(s).unit}`),n=b(()=>e(s).getGaugeValue?.(t.facility));J(r,{get title(){return e(s).label},get value(){return e(c)},get gaugeValue(){return e(n)}})}}),i(d),g(a,d)}var He=x('<section class="border-default bg-card rounded-lg border p-4 shadow-sm"><h3 class="text-secondary m-0 mb-3 text-sm font-semibold"> </h3> <div></div></section>'),Oe=x('<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3" role="region" aria-label="施設間の指標比較"></div>');function Ze(a,t){B(t,!0);const d=b(()=>ke({itemCount:t.facilities.length,maxColumns:3}));var r=Oe();O(r,21,()=>Q,s=>s.label,(s,c)=>{var n=He(),f=l(n),h=l(f,!0);i(f);var m=C(f,2);O(m,21,()=>t.facilities,p=>p.id,(p,y)=>{{let w=b(()=>we(e(y).name)),M=b(()=>e(c).getValue(e(y))),o=b(()=>e(c).unit);J(p,{get title(){return e(w)},get value(){return`${e(M)??""} ${e(o)??""}`}})}}),i(m),i(n),V(()=>{Y(n,"aria-labelledby",`metric-${e(c).label??""}`),Y(f,"id",`metric-${e(c).label??""}`),D(h,e(c).label),U(m,1,`grid gap-2 ${e(d)??""}`)}),g(s,n)}),i(r),g(a,r),E()}var Le=x('<div role="region" aria-label="施設詳細" class="border-default bg-card flex h-full flex-col overflow-hidden rounded-lg border shadow-sm"><div class="flex flex-1 items-center justify-center p-6 text-center"><!></div></div>'),Ue=x('<div class="border-default bg-surface-secondary flex h-64 items-center justify-center rounded-lg border-2 border-dashed"><div class="text-center"><p class="text-secondary text-lg font-medium"> </p> <p class="text-tertiary text-sm">準備中</p></div></div>');function Ne(a,t){B(t,!0);let d=z(t,"displayMode",3,"facility");const r=b(()=>t.facilities??(t.facility?[t.facility]:[])),s=b(()=>d()==="view"),c=b(()=>e(r).length===1),n=b(()=>e(r)[0]),f=b(()=>e(s)?q.find(o=>o.id===t.activeTab)?.label??"不明なビュー":e(c)?e(r)[0].name:`${e(r).length}施設の比較`),h=b(()=>e(s)?e(r).map(o=>o.name).join(" / "):e(c)?`${e(r)[0].type} / ${e(r)[0].beds}床`:""),m=b(()=>e(s)?"ビュー別":"施設別");var p=H(),y=A(p);{var w=o=>{var u=Le(),v=l(u),_=l(v);K(_,{title:"結果が表示されていません",description:"選択中の条件に一致する施設がありません。"}),i(v),i(u),g(o,u)},M=o=>{De(o,{get title(){return e(f)},get subtitle(){return e(h)},get badge(){return e(m)},children:(u,v)=>{var _=H(),F=A(_);{var P=k=>{var j=H(),G=A(j);{var R=T=>{Re(T,{get facility(){return e(n)}})},L=T=>{Ze(T,{get facilities(){return e(r)}})};S(G,T=>{e(c)&&e(n)?T(R):T(L,!1)})}g(k,j)},I=k=>{var j=Ue(),G=l(j),R=l(G),L=l(R);i(R),ae(2),i(G),i(j),V(T=>D(L,`${T??""}タブ`),[()=>q.find(T=>T.id===t.activeTab)?.label]),g(k,j)};S(F,k=>{t.activeTab==="overview"?k(P):k(I,!1)})}g(u,_)}})};S(y,o=>{e(r).length===0?o(w):o(M,!1)})}g(a,p),E()}var We=x('<div class="flex h-full items-center justify-center text-center"><!></div>'),Ye=x('<div class="overflow-hidden"><!></div>'),qe=x('<section id="dashboard-section" aria-label="施設ダッシュボード" class="bg-page flex min-h-screen flex-1 flex-col"><div class="flex flex-1"><!> <div class="flex flex-1 flex-col overflow-hidden"><!> <main class="flex-1 overflow-hidden p-4 sm:p-6 lg:p-8"><!></main></div></div></section>');function Je(a,t){B(t,!0);const d=be(),r=b(()=>d.comparisonType),s=b(()=>d.selectedFacilities),c=b(()=>d.sortedViewIds),n=b(()=>e(s).length===0?[]:e(r)==="facility"?e(s).map(v=>({key:v.id,props:{facility:v,activeTab:d.activeTab,displayMode:"facility"}})):e(c).map(v=>({key:v,props:{facilities:e(s),activeTab:v,displayMode:"view"}})));var f=qe(),h=l(f),m=l(h);fe(m,{});var p=C(m,2),y=l(p);me(y,{});var w=C(y,2),M=l(w);{var o=v=>{var _=We(),F=l(_);K(F,{title:"絞り込みが行われていません",description:"上部の施設カードを選択すると、結果パネルにメトリクスが表示されます。"}),i(_),g(v,_)},u=v=>{Fe(v,{get items(){return e(n)},columns:"auto",gap:"lg",item:(F,P=re)=>{var I=Ye(),k=l(I);Ne(k,te(()=>P().props)),i(I),g(F,I)},$$slots:{item:!0}})};S(M,v=>{e(s).length===0?v(o):v(u,!1)})}i(w),i(p),i(h),i(f),g(a,f),E()}var Ke=x('<meta name="description" content="共愛会の4施設（戸畑共立病院、戸畑リハビリテーション病院、あやめの里、明治町クリニック）の経営指標を一元管理"/>'),Qe=x('<nav aria-label="ボードナビゲーション" class="sticky-header-nav border-default bg-card/95 border-b px-4 md:px-8"><div class="flex items-stretch justify-between gap-2 md:gap-3"><!></div></nav>'),Xe=x('<header class="border-divider bg-card border-b px-4 py-3 shadow-sm sm:px-6 lg:px-8"><div class="flex flex-wrap items-center justify-between gap-3 sm:gap-4"><div class="flex flex-col gap-1"><h1 class="text-primary text-xl font-bold">共愛会 施設ダッシュボード</h1> <p class="text-tertiary text-sm">法人全体の経営指標を一元管理</p></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-wrap items-center gap-2 sm:gap-3"><!> <!></div> <button type="button" class="border-default bg-card text-secondary hover-bg-subtle rounded-md border px-3 py-1.5 text-sm font-medium">すべて解除</button></div></div></header>'),$e=x("<!> <!> <!>",1);function wt(a,t){B(t,!0);const d=b(()=>t.data.facilities),r=b(()=>t.data.navItems);let s=W("previous"),c=W(!0);const n=xe(he([],{displayDays:14}));ie(()=>{n.setFacilities(e(d))});function f(){n.toggleComparisonType()}function h(){n.clearAllSelections()}var m=$e();ne("89g097",o=>{var u=Ke();se(()=>{le.title="共愛会 施設ダッシュボード"}),g(o,u)});var p=A(m);pe(p,{onVisibilityChange:o=>{N(c,o,!0)}});var y=C(p,2);{var w=o=>{var u=Qe(),v=l(u),_=l(v);ue(_,{get navItems(){return e(r)}}),i(v),i(u),g(o,u)};S(y,o=>{e(c)||o(w)})}var M=C(y,2);ze(M,{stickyHeader:!0,headerZIndex:50,header:u=>{var v=Xe(),_=l(v),F=C(l(_),2),P=l(F),I=l(P);ce(I,{get value(){return e(s)},onchange:G=>{N(s,G,!0)}});var k=C(I,2);ve(k,{get value(){return n.comparisonType},onclick:f}),i(P);var j=C(P,2);i(F),i(_),i(v),de("click",j,h),g(u,v)},children:(u,v)=>{Je(u,{})},$$slots:{header:!0,default:!0}}),g(a,m),E()}oe(["click"]);export{wt as component,Ct as universal};

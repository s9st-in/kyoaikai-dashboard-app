import"../chunks/DsnmJJEf.js";import{s as q,o as ue,b as de}from"../chunks/T2Bmc5lN.js";import{p as k,k as T,d as x,g as t,a as u,b as L,u as o,c as b,n as V,r as _,f as h,b2 as J,h as Z,s as S,i as ne,t as C}from"../chunks/p4dYvpg6.js";import{i as G}from"../chunks/36Dr0qmW.js";import{s as A}from"../chunks/BcvOLtEm.js";import{b as D,s as re}from"../chunks/Cq4yWqvx.js";import{s as oe,a as se}from"../chunks/BzlezhIL.js";import{p as le}from"../chunks/DXwMJcGb.js";import{r as Q,p as E,c as X,G as $}from"../chunks/OQgd7Oh0.js";import{R as ce,T as ve,U as me,S as fe}from"../chunks/Dh3huXxZ.js";import"../chunks/BhIsClV-.js";import{d as ge,e as pe}from"../chunks/aTZK_S6W.js";import{g as be}from"../chunks/OCDTGWHg.js";import{A as _e}from"../chunks/CU_HXm89.js";import{m as W,a as he}from"../chunks/CS60pbwF.js";import"../chunks/CQy8OeFy.js";import{I as xe}from"../chunks/CkzHvpIg.js";import{g as U}from"../chunks/CM1W8w0u.js";import{r as z}from"../chunks/DCParltR.js";import{F as ye}from"../chunks/oulXoRit.js";import"../chunks/P7rPqgRT.js";import{s as Ie,g as Se,b as Ge}from"../chunks/CHXnk8Xj.js";import{i as we}from"../chunks/CuRQ2e7u.js";var Be=h("<div><!></div>");function Te(f,e){k(e,!0);const c=Q(e,["$$slots","$$events","$$legacy"]),i=o(()=>e.element),v=o(()=>e.children),s=o(()=>J(c,["element","children"])),l=o(()=>W({"data-scope":"app-bar","data-part":"headline"},t(s)));var n=T(),m=x(n);{var g=a=>{var r=T(),d=x(r);A(d,()=>t(i),()=>t(l)),u(a,r)},p=a=>{var r=Be();D(r,()=>({...t(l)}));var d=b(r);A(d,()=>t(v)??V),_(r),u(a,r)};G(m,a=>{t(i)?a(g):a(p,!1)})}u(f,n),L()}var Ae=h("<nav><!></nav>");function ke(f,e){k(e,!0);const c=Q(e,["$$slots","$$events","$$legacy"]),i=o(()=>e.element),v=o(()=>e.children),s=o(()=>J(c,["element","children"])),l=o(()=>W({"data-scope":"app-bar","data-part":"lead"},t(s)));var n=T(),m=x(n);{var g=a=>{var r=T(),d=x(r);A(d,()=>t(i),()=>t(l)),u(a,r)},p=a=>{var r=Ae();D(r,()=>({...t(l)}));var d=b(r);A(d,()=>t(v)??V),_(r),u(a,r)};G(m,a=>{t(i)?a(g):a(p,!1)})}u(f,n),L()}var Le=h("<header><!></header>");function Ke(f,e){k(e,!0);const c=Q(e,["$$slots","$$events","$$legacy"]),i=o(()=>e.element),v=o(()=>e.children),s=o(()=>J(c,["element","children"])),l=o(()=>W({"data-scope":"app-bar","data-part":"root"},t(s)));var n=T(),m=x(n);{var g=a=>{var r=T(),d=x(r);A(d,()=>t(i),()=>t(l)),u(a,r)},p=a=>{var r=Le();D(r,()=>({...t(l)}));var d=b(r);A(d,()=>t(v)??V),_(r),u(a,r)};G(m,a=>{t(i)?a(g):a(p,!1)})}u(f,n),L()}var Re=h("<div><!></div>");function Oe(f,e){k(e,!0);const c=Q(e,["$$slots","$$events","$$legacy"]),i=o(()=>e.element),v=o(()=>e.children),s=o(()=>J(c,["element","children"])),l=o(()=>W({"data-scope":"app-bar","data-part":"toolbar"},t(s)));var n=T(),m=x(n);{var g=a=>{var r=T(),d=x(r);A(d,()=>t(i),()=>t(l)),u(a,r)},p=a=>{var r=Re();D(r,()=>({...t(l)}));var d=b(r);A(d,()=>t(v)??V),_(r),u(a,r)};G(m,a=>{t(i)?a(g):a(p,!1)})}u(f,n),L()}var He=h("<nav><!></nav>");function Pe(f,e){k(e,!0);const c=Q(e,["$$slots","$$events","$$legacy"]),i=o(()=>e.element),v=o(()=>e.children),s=o(()=>J(c,["element","children"])),l=o(()=>W({"data-scope":"app-bar","data-part":"trail"},t(s)));var n=T(),m=x(n);{var g=a=>{var r=T(),d=x(r);A(d,()=>t(i),()=>t(l)),u(a,r)},p=a=>{var r=He();D(r,()=>({...t(l)}));var d=b(r);A(d,()=>t(v)??V),_(r),u(a,r)};G(m,a=>{t(i)?a(g):a(p,!1)})}u(f,n),L()}const Y=Object.assign(Ke,{Toolbar:Oe,Lead:ke,Headline:Te,Trail:Pe});var je=h("<!> <!>",1);function Me(f,e){let c=E(e,"icon",3,xe),i=ne(!1);var v=je(),s=x(v);he(s,{get icon(){return c()},size:"sm",variant:"ghost",ariaLabel:"アプリケーション情報を表示",onclick:()=>Z(i,!0)});var l=S(s,2);_e(l,{variant:"medium",get open(){return t(i)},set open(n){Z(i,n,!0)}}),u(f,v)}var Ce=h('<div class="bg-primary-ui flex size-6 shrink-0 items-center justify-center rounded text-white antialiased"><span class="material-symbols-outlined leading-none" style="font-size: 14px;"> </span></div>');function Ee(f,e){k(e,!0);const c=o(()=>e.groups.find(s=>s.key===e.currentGroupKey)??e.groups[0]);function i(s){return s?.metadata?.icon??"medical_services"}async function v(s){if(s.key!==e.currentGroupKey){if(!e.currentSlug){U(z("/board"));return}try{const l=new URLSearchParams({scopeSlug:e.currentSlug,groupKey:s.key}),n=await fetch(`/api/board-group/resolve?${l}`);if(!n.ok){U(z("/board"));return}const{boardSlug:m}=await n.json();typeof m=="string"&&m.length>0?U(z(`/board/${m}`)):U(z("/board"))}catch{U(z("/board"))}}}{const s=(n,m=V)=>{var g=Ce(),p=b(g),a=b(p,!0);_(p),_(g),C(r=>q(a,r),[()=>i(m())]),u(n,g)};let l=o(()=>t(c)?.name??"");ce(f,{get items(){return e.groups},get selectedValue(){return e.currentGroupKey},get triggerLabel(){return t(l)},getItemValue:n=>n.key,getItemLabel:n=>n.name,onSelect:v,sheetTitle:"グループを選択",triggerAriaLabel:"ダッシュボードグループを選択",triggerClass:"md:text-lg",menuContentClass:"text-base",itemIcon:s,$$slots:{itemIcon:!0}})}L()}var Ve=h('<div class="bg-primary-ui flex size-10 items-center justify-center rounded-lg text-white"><span class="material-symbols-outlined text-xl">medical_services</span></div>'),De=h('<p class="text-primary text-lg font-bold md:hidden">重要指標</p> <p class="text-primary hidden text-xl font-bold md:block"> </p>',1),Fe=h("<!> <!>",1),Ne=h("<!> <!>",1),Ue=h("<!> <!> <!>",1);function ze(f,e){k(e,!0);let c=E(e,"showInfoButton",3,!0),i=E(e,"user",3,null);const v=o(()=>pe&&e.boardGroups&&e.boardGroups.length>0&&e.currentGroupKey!==void 0);Y(f,{class:"border-default bg-card border-b px-4 pt-[calc(1rem+var(--safe-area-top))] pb-4 md:px-8 md:pt-4",children:(s,l)=>{var n=T(),m=x(n);X(m,()=>Y.Toolbar,(g,p)=>{p(g,{class:"grid-cols-[auto_1fr_auto]",children:(a,r)=>{var d=Ue(),K=x(d);X(K,()=>Y.Lead,(R,I)=>{I(R,{children:(y,M)=>{var P=T(),j=x(P);{var F=B=>{Ee(B,{get groups(){return e.boardGroups},get currentGroupKey(){return e.currentGroupKey},get currentSlug(){return e.currentSlug}})},N=B=>{var O=Ve();u(B,O)};G(j,B=>{t(v)?B(F):B(N,!1)})}u(y,P)},$$slots:{default:!0}})});var w=S(K,2);X(w,()=>Y.Headline,(R,I)=>{I(R,{class:"flex flex-row items-center gap-x-3",children:(y,M)=>{var P=Fe(),j=x(P);{var F=O=>{var ee=De(),te=S(x(ee),2),ie=b(te,!0);_(te),C(()=>q(ie,e.title)),u(O,ee)};G(j,O=>{t(v)||O(F)})}var N=S(j,2);{var B=O=>{Me(O,{})};G(N,O=>{c()&&O(B)})}u(y,P)},$$slots:{default:!0}})});var H=S(w,2);X(H,()=>Y.Trail,(R,I)=>{I(R,{children:(y,M)=>{var P=Ne(),j=x(P);{var F=B=>{me(B,{get username(){return i().name}})};G(j,B=>{ge&&i()&&B(F)})}var N=S(j,2);ve(N,{variant:"toolbar"}),u(y,P)},$$slots:{default:!0}})}),u(a,d)},$$slots:{default:!0}})}),u(s,n)},$$slots:{default:!0}}),L()}class Ye{#e=ne(!1);get current(){return t(this.#e)}set current(e){Z(this.#e,e,!0)}reset(){Z(this.#e,!1)}}const ae=new Ye;var qe=h('<nav aria-label="ボードナビゲーション" class="sticky-header-nav border-default bg-card border-b px-4 py-3 md:px-8"><div class="flex items-center gap-4"><!> <!> <button type="button" class="hover-bg-moderate border-default ml-auto hidden shrink-0 items-center justify-center rounded-md border p-2 md:hidden" aria-controls="hamburger-menu" disabled=""></button></div></nav>');function Je(f,e){k(e,!0);let c=E(e,"subnavItems",19,()=>[]);var i=qe(),v=b(i),s=b(v);ye(s,{get currentSlug(){return e.currentSlug},get navItems(){return e.navItems}});var l=S(s,2);{let m=o(()=>e.currentSlug??"");fe(l,{get items(){return c()},get currentSlug(){return t(m)}})}var n=S(l,2);_(v),_(i),C(()=>{re(n,"aria-label",ae.current?"メニューを閉じる":"メニューを開く"),re(n,"aria-expanded",ae.current)}),u(f,i),L()}var Qe=h("<!> <!>",1);function We(f,e){k(e,!0);const c=()=>se(le,"$page",i),[i,v]=oe();let s=E(e,"showInfoButton",3,!0);const l=o(()=>c().params.slug?.replace(/\.html$/,"")),n=o(()=>t(l)?be(t(l)):null),m=o(()=>c().data?.subnavItems??[]),g=o(()=>c().data?.navItems??void 0),p=o(()=>t(n)?.hospital.dashboardTitle??"重要指標ダッシュボード"),a=o(()=>c().data?.user??null),r=o(()=>c().data?.boardGroups??void 0),d=o(()=>c().data?.currentGroupKey??void 0);var K=Qe(),w=x(K);ze(w,{get title(){return t(p)},get showInfoButton(){return s()},get user(){return t(a)},get boardGroups(){return t(r)},get currentGroupKey(){return t(d)},get currentSlug(){return t(l)}});var H=S(w,2);Je(H,{get currentSlug(){return t(l)},get subnavItems(){return t(m)},get navItems(){return t(g)}}),u(f,K),L(),v()}var Xe=h("<p> </p>"),Ze=h("<p> </p>"),$e=h('<div class="text-tertiary text-center text-xs"><!> <!></div>'),et=h('<footer class="border-default bg-page border-t px-4 py-6 pb-[max(1.5rem,calc(1.5rem+env(safe-area-inset-bottom)))] md:px-8"><div class="mx-auto max-w-7xl"><div class="flex flex-col items-center justify-center gap-4"><div class="text-tertiary text-center text-sm"><p> </p></div> <!></div></div></footer>');function tt(f,e){k(e,!0);let c=E(e,"showVersion",3,!1);const i=new Date().getFullYear();var v=et(),s=b(v),l=b(s),n=b(l),m=b(n),g=b(m);_(m),_(n);var p=S(n,2);{var a=r=>{var d=$e(),K=b(d);{var w=I=>{var y=Xe(),M=b(y);_(y),C(()=>q(M,`Version: ${$.shortHash}`)),u(I,y)};G(K,I=>{I(w)})}var H=S(K,2);{var R=I=>{var y=Ze(),M=b(y);_(y),C(()=>q(M,`Build: ${$.date}`)),u(I,y)};G(H,I=>{I(R)})}_(d),u(r,d)};G(p,r=>{c()&&$.shortHash&&r(a)})}_(l),_(s),_(v),C(()=>q(g,`© ${i??""} 社会医療法人共愛会 All rights reserved.`)),u(f,v),L()}var rt=h("<!> <!>",1),at=h('<div><!> <main class="flex-1"><!></main> <!></div>');function Tt(f,e){k(e,!0);const c=()=>se(le,"$page",i),[i,v]=oe();Ie(Se("board"));const s=o(()=>c().params.slug?.replace(/\.html$/,"")),l=o(()=>t(s)??"overview"),n=o(()=>!t(s)),m=o(()=>Ge("board",t(l)));ue(()=>{const w=we("board");de(w)});var g=at();D(g,()=>({class:"flex min-h-dvh flex-col",...t(m)}));var p=b(g);{var a=w=>{var H=rt(),R=x(H);G(R,y=>{});var I=S(R,2);{let y=o(()=>!0);We(I,{get showInfoButton(){return t(y)}})}u(w,H)};G(p,w=>{t(n)||w(a)})}var r=S(p,2),d=b(r);A(d,()=>e.children),_(r);var K=S(r,2);tt(K,{showVersion:!1}),_(g),u(f,g),L(),v()}export{Tt as component};

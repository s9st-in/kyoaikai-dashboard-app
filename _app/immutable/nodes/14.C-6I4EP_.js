import{r as Je,a as Qe,u as Ye,s as et,b as tt,g as at,c as nt}from"../chunks/DXprL8kV.js";import"../chunks/DsnmJJEf.js";import{d as Ge,s as Re,a as F,o as rt}from"../chunks/T2Bmc5lN.js";import{k as ue,d as z,a as S,j as B,g as n,h as p,i as L,ad as Oe,p as _e,c as m,r as v,t as ae,b as be,u as h,f as y,s as x,l as $e,a6 as st}from"../chunks/p4dYvpg6.js";import{i as Ae}from"../chunks/36Dr0qmW.js";import{I as we,s as xe,D as Y,P as ot,X as it,e as Be,p as lt}from"../chunks/CS60pbwF.js";import{h as ct}from"../chunks/COZkYLhp.js";import{s as E,d as Ue,r as dt,e as ut,a as ft}from"../chunks/Cq4yWqvx.js";import{m as gt,S as Ne}from"../chunks/CQy8OeFy.js";import{a as ce,g as vt}from"../chunks/C3ChFxzh.js";import{l as ye,s as Ce,p as te,c as ee,k as mt}from"../chunks/OQgd7Oh0.js";import"../chunks/P7rPqgRT.js";import{l as pt}from"../chunks/BhIsClV-.js";import{M as ht}from"../chunks/BYYwbIbG.js";import"../chunks/xh2F44ca.js";import{s as Te}from"../chunks/BcvOLtEm.js";import{E as St,D as _t,C as bt,a as wt,b as xt,S as yt}from"../chunks/xICVd9uM.js";import"../chunks/CbAJKWx5.js";import{l as Ct,S as kt}from"../chunks/aTZK_S6W.js";import{l as Dt,s as Mt}from"../chunks/Bz_5SxSP.js";import{p as Le,c as It,d as Et}from"../chunks/CuRQ2e7u.js";import"../chunks/dpGQfjpZ.js";import"../chunks/B3FzVGZu.js";function At(t,e){const a=ye(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M5 12h14"}]];we(t,Ce({name:"minus"},()=>a,{get iconNode(){return s},children:(i,l)=>{var r=ue(),o=z(r);xe(o,e,"default",{}),S(i,r)},$$slots:{default:!0}}))}function Rt(t,e){const a=ye(e,["children","$$slots","$$events","$$legacy"]);const s=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]];we(t,Ce({name:"monitor"},()=>a,{get iconNode(){return s},children:(i,l)=>{var r=ue(),o=z(r);xe(o,e,"default",{}),S(i,r)},$$slots:{default:!0}}))}function $t(t,e){const a=ye(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];we(t,Ce({name:"plus"},()=>a,{get iconNode(){return s},children:(i,l)=>{var r=ue(),o=z(r);xe(o,e,"default",{}),S(i,r)},$$slots:{default:!0}}))}function Ke(t,e){const a=ye(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"}],["circle",{cx:"12",cy:"12",r:"3"}]];we(t,Ce({name:"settings"},()=>a,{get iconNode(){return s},children:(i,l)=>{var r=ue(),o=z(r);xe(o,e,"default",{}),S(i,r)},$$slots:{default:!0}}))}function Tt(t,e){const{breakpoints:a,minScale:s,maxScale:i}=e;if(a.length===0)return de(e.baseScaleFactor,s,i);if(t<=a[0].width)return de(a[0].scale,s,i);const l=a[a.length-1];if(t>=l.width)return de(l.scale,s,i);for(let r=0;r<a.length-1;r++){const o=a[r],d=a[r+1];if(t>=o.width&&t<=d.width){const c=Pt(t,o,d);return de(c,s,i)}}return de(e.baseScaleFactor,s,i)}function zt(t,e){const{columnsBreakpoints:a,minColumns:s,maxColumns:i}=e;if(a.length===0)return s;let l=a[0].columns;for(const r of a)if(t>=r.width)l=r.columns;else break;return Math.max(s,Math.min(i,l))}function Pt(t,e,a){const s=a.width-e.width,i=a.scale-e.scale,l=(t-e.width)/s;return e.scale+i*l}function de(t,e,a){return Math.max(e,Math.min(a,t))}function Nt(t){let e=L(1),a=L(1920),s=L(4);function i(){const o=window.innerWidth;p(a,o,!0),p(e,Tt(o,t.scalingSettings),!0),p(s,zt(o,t.gridSettings),!0)}let l=null;function r(){l!==null&&clearTimeout(l),l=setTimeout(()=>{i(),l=null},gt.RESIZE_DEBOUNCE_MS)}return B(()=>{i(),window.addEventListener("resize",r);const o=t.scalingSettings.breakpoints.map(d=>{const c=window.matchMedia(`(min-width: ${d.width}px)`),f=()=>i();return c.addEventListener("change",f),{mq:c,listener:f}});return()=>{window.removeEventListener("resize",r),l!==null&&clearTimeout(l),o.forEach(({mq:d,listener:c})=>{d.removeEventListener("change",c)})}}),{get scaleFactor(){return n(e)},get viewportWidth(){return n(a)},get gridColumns(){return n(s)}}}function Lt(t){let e=L(Date.now()+t.intervalMs),a=L(Oe(t.intervalMs)),s=null;function i(){const r=Date.now(),o=n(e)-r;o<=0?(p(e,Date.now()+t.intervalMs),p(a,t.intervalMs,!0)):p(a,o)}function l(){p(e,Date.now()+t.intervalMs),p(a,t.intervalMs,!0)}return B(()=>{const r=t.intervalMs;return p(e,Date.now()+r),p(a,r,!0),s=setInterval(()=>{i()},1e3),i(),()=>{s!==null&&(clearInterval(s),s=null)}}),{get remaining(){return n(a)},restart:l}}function Ft(t){let e=L(Oe({...t.defaults})),a=L(!1);function s(){const c=Dt(t.slug);c&&p(e,{...c},!0)}function i(){Mt(t.slug,n(e)),Et("sinage",n(e).theme),p(a,!1)}function l(){const c=n(e).theme;p(e,{...t.defaults},!0),t.defaults.theme!==c&&Le("sinage",t.defaults.theme)}function r(){p(a,!0)}function o(){p(a,!1),s(),It("sinage")}function d(){n(a)?o():r()}return B(()=>{s()}),{get settings(){return n(e)},get isOpen(){return n(a)},updateSettings(c){const f=n(e).theme;p(e,c,!0),c.theme!==f&&Le("sinage",c.theme)},save:i,reset:l,openDrawer:r,closeDrawer:o,toggleDrawer:d}}function jt(t){const e=[];return(t.ctrlKey||t.metaKey)&&e.push("Ctrl"),t.altKey&&e.push("Alt"),t.shiftKey&&e.push("Shift"),t.key&&!["Control","Alt","Shift","Meta"].includes(t.key)&&e.push(t.key.toUpperCase()),e.join("+")}function Ve(t){if(!t||!(t instanceof HTMLElement))return!1;const e=t.tagName.toLowerCase(),a=e==="input"||e==="textarea",s=t.isContentEditable;return a||s}function Gt(t){function e(a){if(Ve(a.target))return;const s=jt(a);for(const[i,l]of t.shortcuts)if(s.toUpperCase()===i.toUpperCase()){a.preventDefault(),l();return}}B(()=>(window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}))}function Ot(t,e,a){const s=a.positions.find(d=>d.cardIndex===t);if(!s)return null;const i=s.row+(s.rowSpan-1)/2,l=s.col+(s.colSpan-1)/2;let r=null,o=1/0;for(const d of a.positions){if(d.cardIndex===t)continue;const c=d.row+(d.rowSpan-1)/2,f=d.col+(d.colSpan-1)/2;let u=!1;switch(e){case"right":u=f>l;break;case"left":u=f<l;break;case"down":u=c>i;break;case"up":u=c<i;break}if(!u)continue;const g=Math.abs(c-i),_=Math.abs(f-l),k=3,X=e==="left"||e==="right"?_+g*k:g+_*k;X<o&&(o=X,r=d.cardIndex)}return r}function Bt(t){let e=L(null);B(()=>{n(e)!==null&&n(e)>=t.cardCount&&p(e,t.cardCount>0?t.cardCount-1:null,!0)});function a(r){if(n(e)===null){p(e,0);return}if(t.layoutMap){const d=Ot(n(e),r,t.layoutMap);d!==null&&p(e,d,!0);return}let o=n(e);switch(r){case"right":o=n(e)+1;break;case"left":o=n(e)-1;break;case"down":o=n(e)+t.gridColumns;break;case"up":o=n(e)-t.gridColumns;break}o>=0&&o<t.cardCount&&p(e,o,!0)}function s(){p(e,null)}function i(r){r>=0&&r<t.cardCount&&p(e,r,!0)}function l(r){if(Ve(r.target))return;const d={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"}[r.key];d&&(r.preventDefault(),a(d))}return B(()=>(window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)})),{get selectedIndex(){return n(e)},navigate:a,clearSelection:s,selectIndex:i}}const Ut={elevator:St};function Kt(t){return Ut[t]??_t}const Vt=async({data:t})=>{if(!t.boardSlug)return{...t,metrics:[],graphs:[]};const e={slug:t.boardSlug,metricDefinitions:t.metricDefinitions,graphDefinitions:t.graphDefinitions},a=Je(e),s=Qe(e);return{...t,metrics:a,graphs:s}},Ua=Object.freeze(Object.defineProperty({__proto__:null,load:Vt},Symbol.toStringTag,{value:"Module"}));var Zt=y('<div class="relative h-full overflow-hidden rounded-lg transition-all duration-150 svelte-joxuqx" role="gridcell" data-sinage-card=""><!></div>');function Fe(t,e){_e(e,!0);let a=te(e,"isSelected",3,!1),s=te(e,"scaleFactor",3,1),i=te(e,"colSpan",3,1),l=te(e,"rowSpan",3,1);const r=h(()=>s()*bt),o=h(()=>s()*Ne.BASE_PADDING_REM),d=h(()=>s()*Ne.BASE_BORDER_WIDTH_PX);var c=Zt();let f;var u=m(c);Te(u,()=>e.children),v(c),ae(()=>{E(c,"aria-selected",a()),f=Ue(c,"",f,{"--card-scale":n(r),padding:`${n(o)??""}rem`,"border-width":`${n(d)??""}px`,"border-color":a()?"rgb(var(--color-primary-500))":"transparent","border-style":"solid","--col-span":i(),"--row-span":l(),"grid-column":`span ${i()??""}`,"grid-row":`span ${l()??""}`})}),S(t,c),be()}var Xt=y('<div class="grid h-full items-stretch" role="grid" aria-label="サイネージ指標グリッド" data-sinage-grid=""><!></div>');function Ht(t,e){_e(e,!0);let a=te(e,"scaleFactor",3,1),s=te(e,"hasMixedSpans",3,!1);const i=h(()=>e.layoutSettings.gridGap*a()),l={1:.5,2:.65,3:.8,4:1},r=h(()=>n(i)*(l[e.gridColumns]??1)),o={1:.5,2:.7,3:.85,4:.9,5:.95},d=h(()=>e.targetRows?o[Math.min(e.targetRows,5)]??1:1),c=h(()=>n(i)*n(d)),f=h(()=>e.targetRows?`repeat(${e.targetRows}, 1fr)`:void 0);var u=Xt();let g;var _=m(u);Te(_,()=>e.children),v(u),ae(k=>{E(u,"data-sinage-grid-sized",e.targetRows?"":void 0),E(u,"data-scale",k),E(u,"data-columns",e.gridColumns),g=Ue(u,"",g,{"--grid-gap":`${n(i)??""}rem`,"--adjusted-col-gap":`${n(r)??""}rem`,"--adjusted-row-gap":`${n(c)??""}rem`,"--card-cols":e.gridColumns,"--card-aspect":e.gridSettings.aspectRatio,"--scale-factor":a(),"grid-template-columns":`repeat(${e.gridColumns??""}, 1fr)`,"column-gap":"clamp(0.5rem, var(--adjusted-col-gap), 2.5rem)","row-gap":"clamp(0.375rem, var(--adjusted-row-gap), 2rem)","grid-template-rows":n(f),"grid-auto-rows":e.gridSettings.autoRows,"grid-auto-flow":s()?"dense":"row"})},[()=>a().toFixed(2)]),S(t,u),be()}var Wt=y('<div class="relative h-dvh" data-sinage-layout=""><main class="h-full overflow-auto" aria-label="メインコンテンツ"><!></main></div>');function qt(t,e){var a=Wt(),s=m(a),i=m(s);Te(i,()=>e.children),v(s),v(a),S(t,a)}var Jt=y('<button type="button" role="radio"><!> <span class="capitalize"> </span></button>'),Qt=y('<div class="flex items-center justify-between border-b border-surface-200 px-6 py-4 dark:border-surface-700"><div class="flex items-center gap-2"><!> <!></div> <!></div> <div class="flex min-h-0 flex-1 flex-col"><div class="flex-1 space-y-6 overflow-y-auto px-6 py-6"><div class="space-y-3"><label class="text-on-surface text-sm font-medium" for="theme-select">テーマ</label> <div class="space-y-2" role="radiogroup" aria-labelledby="theme-select"></div></div> <div class="space-y-3"><div class="flex items-center justify-between"><label for="card-size" class="text-on-surface text-sm font-medium">カードサイズ</label> <span class="text-on-surface-variant font-mono text-sm" aria-live="polite"> </span></div> <div class="flex items-center gap-3"><button type="button" class="variant-ghost-surface btn btn-sm" aria-label="カードサイズを小さくする"><!></button> <input id="card-size" type="range" class="range flex-1"/> <button type="button" class="variant-ghost-surface btn btn-sm" aria-label="カードサイズを大きくする"><!></button></div></div> <div class="rounded-container-token space-y-3 bg-surface-100 p-4 dark:bg-surface-800"><h3 class="text-on-surface text-sm font-medium">キーボードショートカット</h3> <dl class="space-y-2 text-sm"><div class="flex justify-between"><dt class="text-on-surface-variant">設定を開く</dt> <dd class="text-on-surface font-mono">Ctrl+Shift+S</dd></div> <div class="flex justify-between"><dt class="text-on-surface-variant">閉じる</dt> <dd class="text-on-surface font-mono">Esc</dd></div> <div class="flex justify-between"><dt class="text-on-surface-variant">カード選択</dt> <dd class="text-on-surface font-mono">↑ ↓ ← →</dd></div></dl></div></div> <div class="flex items-center justify-between border-t border-surface-200 px-6 py-4 dark:border-surface-700"><button type="button" class="variant-ghost-surface btn">キャンセル</button> <div class="flex gap-2"><button type="button" class="variant-ghost-surface btn">リセット</button> <button type="button" class="variant-filled-primary btn">保存</button></div></div></div>',1),Yt=y("<!> <!>",1);function ea(t,e){_e(e,!0);let a=h(()=>({...e.settings}));const s={light:kt,dark:Ct,system:Rt},{min:i,max:l,step:r}=wt,o=h(()=>Math.round(n(a).cardSizeScale*100)),d=["light","dark","system"];function c(g){const _={...n(a),theme:g};p(a,_),e.onSettingsChange(_)}function f(g){const _={...n(a),cardSizeScale:g};p(a,_),e.onSettingsChange(_)}function u(g){g.open||e.onCancel()}Y(t,{get open(){return e.open},onOpenChange:u,children:(g,_)=>{ot(g,{children:(k,X)=>{var T=Yt(),j=z(T);ee(j,()=>Y.Backdrop,(H,W)=>{W(H,{class:"fixed inset-0 z-40 bg-black/50"})});var fe=x(j,2);ee(fe,()=>Y.Positioner,(H,W)=>{W(H,{class:"fixed inset-0 z-50 flex justify-end",children:(ge,ze)=>{var A=ue(),U=z(A);ee(U,()=>Y.Content,(ne,K)=>{K(ne,{class:"flex h-screen w-80 flex-col bg-surface-50 shadow-xl dark:bg-surface-900",children:(ke,ve)=>{var me=Qt(),re=z(me),se=m(re),pe=m(se);Ke(pe,{size:20,class:"text-on-surface","aria-hidden":"true"});var De=x(pe,2);ee(De,()=>Y.Title,(C,$)=>{$(C,{class:"text-on-surface text-lg font-semibold",children:(Z,N)=>{$e();var Se=st("表示設定");S(Z,Se)},$$slots:{default:!0}})}),v(se);var Me=x(se,2);ee(Me,()=>Y.CloseTrigger,(C,$)=>{$(C,{class:"variant-ghost-surface btn btn-sm","aria-label":"設定を閉じる",children:(Z,N)=>{it(Z,{size:20})},$$slots:{default:!0}})}),v(re);var w=x(re,2),b=m(w),D=m(b),q=x(m(D),2);Be(q,20,()=>d,C=>C,(C,$)=>{const Z=h(()=>s[$]);var N=Jt(),Se=m(N);ee(Se,()=>n(Z),(We,qe)=>{qe(We,{size:18,"aria-hidden":"true"})});var Pe=x(Se,2),He=m(Pe,!0);v(Pe),v(N),ae(()=>{ft(N,1,`btn w-full justify-start ${n(a).theme===$?"variant-filled-primary":"variant-ghost-surface"}`),E(N,"aria-checked",n(a).theme===$),Re(He,$==="light"?"ライト":$==="dark"?"ダーク":"システム")}),F("click",N,()=>c($)),S(C,N)}),v(q),v(D);var J=x(D,2),G=m(J),oe=x(m(G),2),Ie=m(oe);v(oe),v(G);var R=x(G,2),M=m(R),O=m(M);At(O,{size:16}),v(M);var I=x(M,2);dt(I);var Q=x(I,2),V=m(Q);$t(V,{size:16}),v(Q),v(R),v(J),$e(2),v(b);var P=x(b,2),ie=m(P),le=x(ie,2),he=m(le),Ee=x(he,2);v(le),v(P),v(w),ae(()=>{Re(Ie,`${n(o)??""}%`),M.disabled=n(a).cardSizeScale<=i,E(I,"min",i),E(I,"max",l),E(I,"step",r),ut(I,n(a).cardSizeScale),E(I,"aria-valuemin",i),E(I,"aria-valuemax",l),E(I,"aria-valuenow",n(a).cardSizeScale),E(I,"aria-valuetext",`${n(o)??""}%`),Q.disabled=n(a).cardSizeScale>=l}),F("click",M,()=>f(Math.max(i,n(a).cardSizeScale-r))),F("input",I,C=>f(parseFloat(C.currentTarget.value))),F("click",Q,()=>f(Math.min(l,n(a).cardSizeScale+r))),F("click",ie,function(...C){e.onCancel?.apply(this,C)}),F("click",he,function(...C){e.onReset?.apply(this,C)}),F("click",Ee,function(...C){e.onSave?.apply(this,C)}),S(ke,me)},$$slots:{default:!0}})}),S(ge,A)},$$slots:{default:!0}})}),S(k,T)},$$slots:{default:!0}})},$$slots:{default:!0}}),be()}Ge(["click","input"]);function je(t){if(typeof performance<"u"&&performance.mark)try{performance.mark(t)}catch(e){pt.debug(`Failed to mark performance: ${t}`,e)}}const ta={"1x1":{colSpan:1,rowSpan:1},"1x2":{colSpan:2,rowSpan:1},"2x1":{colSpan:1,rowSpan:2},"2x2":{colSpan:2,rowSpan:2}};function aa(t){return ta[t]}function Ze(t,e){return{colSpan:Math.min(t.colSpan,e),rowSpan:t.rowSpan}}function na(t,e){if(t.length===0||e<=0)return{grid:[],positions:[]};const a=[],s=[];function i(o,d,c,f){if(d+f>e)return!1;for(let u=o;u<o+c;u++)for(let g=d;g<d+f;g++)if(a[u]?.[g]!=null)return!1;return!0}function l(o){for(;a.length<o;)a.push(new Array(e).fill(null))}function r(o,d,c,f,u){l(d+f);for(let g=d;g<d+f;g++)for(let _=c;_<c+u;_++)a[g][_]=o;s.push({cardIndex:o,row:d,col:c,rowSpan:f,colSpan:u})}for(let o=0;o<t.length;o++){const{span:d}=t[o],c=Ze(d,e),{rowSpan:f,colSpan:u}=c;let g=!1;for(let _=0;!g;_++){l(_+1);for(let k=0;k<=e-u;k++)if(i(_,k,f,u)){r(o,_,k,f,u),g=!0;break}}}return{grid:a,positions:s}}const Xe={colSpan:1,rowSpan:1};function ra(t,e,a){const s={};for(const i of t){const l=e?.[i.id],r=l?aa(l):Xe;s[i.id]=Ze(r,a)}return s}const sa={colSpan:2,rowSpan:1},oa="__clock__";function ia(t,e,a){const s={id:oa,span:sa},i=t.map(l=>({id:l.id,span:e[l.id]??Xe}));return na([s,...i],a)}var la=y('<link rel="preconnect" href="https://script.google.com"/> <link rel="preconnect" href="https://script.googleusercontent.com"/>',1),ca=y('<div class="flex h-full items-center justify-center"><!></div>'),da=y('<button type="button" class="btn-danger">再取得</button>'),ua=y('<div class="flex h-full items-center justify-center"><!></div>'),fa=y('<div class="flex h-full items-center justify-center"><!></div>'),ga=y('<div class="mb-6"><!></div>'),va=y('<div class="mb-2 rounded-lg bg-slate-200/90 py-1.5 text-center text-base font-medium text-slate-700 dark:bg-white/10 dark:text-slate-300" role="status" aria-label="表示データの日付"> </div>'),ma=y("<!> <!>",1),pa=y('<!> <!> <div class="min-h-0 flex-1"><!></div>',1),ha=y('<div class="flex h-full items-center justify-center"><!></div>'),Sa=y('<button type="button" class="fixed top-4 right-4 z-20 flex size-11 items-center justify-center rounded-full bg-white/80 text-slate-500 shadow-sm ring-1 ring-slate-200/80 backdrop-blur-sm transition-colors hover:bg-white hover:text-slate-700 dark:bg-slate-800/80 dark:text-slate-400 dark:ring-slate-700/60 dark:hover:bg-slate-700 dark:hover:text-slate-200" aria-label="表示設定を開く"><!></button> <section class="flex h-full flex-col p-4 md:p-6 xl:p-8" aria-label="サイネージ指標"><!></section>',1),_a=y("<!> <!>",1);function Ka(t,e){_e(e,!0);const a=["blue","orange","green"];let s=L("blue");rt(()=>{p(s,a[Math.floor(Math.random()*a.length)],!0)});const i=h(()=>e.data.slug),l=h(()=>e.data.boardSlug??void 0),r=h(()=>Kt(n(i))),o=Nt({get scalingSettings(){return n(r).scaling},get gridSettings(){return n(r).grid}}),d=Lt({get intervalMs(){return n(r).timer.updateInterval}}),c=Ft({get slug(){return n(i)},get defaults(){return xt}}),f=new Map([["Ctrl+Shift+S",c.toggleDrawer]]);Gt({get shortcuts(){return f}});const u=h(()=>o.scaleFactor*c.settings.cardSizeScale),g=h(()=>et(e.data.metrics??[])),_=h(()=>ra(n(g),n(r).cardLayout?.cardSpans,o.gridColumns??n(r).grid.minColumns)),k=h(()=>ia(n(g),n(_),o.gridColumns??n(r).grid.minColumns)),X=Bt({get cardCount(){return n(g).length+1},get gridColumns(){return o.gridColumns??n(r).grid.minColumns},get layoutMap(){return n(k)}}),T=n(l)?Ye({get slug(){return n(l)}}):void 0,j=tt(()=>({dashboardData:T?.dashboardData??null,effectiveIndex:null,selectedDate:null})),fe=h(()=>{const A=j.sinageDisplayData?.日付;if(!A)return"";const U=lt(A);return U?`${mt(U)} のデータ`:""});let H=L(!1);B(()=>{const A=T?.dashboardData;A&&A.length>0&&(n(H)?d.restart():(p(H,!0),je("sinage-initial-data-loaded")))}),B(()=>{je("sinage-render-start")});var W=_a();ct("r7yzkw",A=>{var U=la();$e(2),S(A,U)});var ge=z(W);qt(ge,{children:(A,U)=>{var ne=Sa(),K=z(ne),ke=m(K);Ke(ke,{size:20}),v(K);var ve=x(K,2),me=m(ve);{var re=w=>{var b=ca(),D=m(b);ce(D,{variant:"empty",title:"ボード未設定",message:"このサイネージにはボードが紐付けられていません。"}),v(b),S(w,b)},se=w=>{var b=ua(),D=m(b);ce(D,{variant:"error",title:"データの取得に失敗しました",get message(){return T.error.message},children:(q,J)=>{var G=da();F("click",G,()=>T?.retryFetch()),S(q,G)},$$slots:{default:!0}}),v(b),S(w,b)},pe=w=>{var b=fa(),D=m(b);ce(D,{variant:"loading",title:"読み込み中",message:"データを取得しています…"}),v(b),S(w,b)},De=w=>{var b=pa(),D=z(b);{var q=R=>{var M=ga(),O=m(M);ce(O,{variant:"error",title:"更新エラー",get message(){return T.error.message}}),v(M),S(R,M)};Ae(D,R=>{T?.error&&R(q)})}var J=x(D,2);{var G=R=>{var M=va(),O=m(M,!0);v(M),ae(()=>Re(O,n(fe))),S(R,M)};Ae(J,R=>{n(fe)&&R(G)})}var oe=x(J,2),Ie=m(oe);Ht(Ie,{get gridSettings(){return n(r).grid},get layoutSettings(){return n(r).layout},get gridColumns(){return o.gridColumns},get scaleFactor(){return n(u)},hasMixedSpans:!0,get targetRows(){return n(k).grid.length},children:(R,M)=>{var O=ma(),I=z(O);{let V=h(()=>X.selectedIndex===0);Fe(I,{get isSelected(){return n(V)},get scaleFactor(){return n(u)},colSpan:2,rowSpan:1,children:(P,ie)=>{yt(P,{get variant(){return n(s)},get scaleFactor(){return n(u)}})},$$slots:{default:!0}})}var Q=x(I,2);Be(Q,19,()=>n(g),V=>V.id,(V,P,ie)=>{const le=h(()=>n(_)[n(P).id]??{colSpan:1,rowSpan:1});{let he=h(()=>X.selectedIndex===n(ie)+1);Fe(V,{get isSelected(){return n(he)},get scaleFactor(){return n(u)},get colSpan(){return n(le).colSpan},get rowSpan(){return n(le).rowSpan},children:(Ee,C)=>{{let $=h(()=>vt(n(P),j.sinageDisplayData)),Z=h(()=>at(n(P))==="dev"?"dev":"default"),N=h(()=>nt(n(P)));ht(Ee,{get title(){return n(P).title},get value(){return n($)},get variant(){return n(Z)},get badge(){return n(N)},layout:"vertical-left"})}},$$slots:{default:!0}})}}),S(R,O)},$$slots:{default:!0}}),v(oe),S(w,b)},Me=w=>{var b=ha(),D=m(b);ce(D,{variant:"empty",title:"データがありません",message:"データの更新状況を確認してください。"}),v(b),S(w,b)};Ae(me,w=>{n(l)?T?.error&&!j.sinageDisplayData?w(se,1):T?.isLoading&&!j.sinageDisplayData?w(pe,2):j.sinageDisplayData?w(De,3):w(Me,!1):w(re)})}v(ve),ae(()=>{E(K,"aria-expanded",c.isOpen),E(ve,"data-sinage-slug",n(i))}),F("click",K,function(...w){c.toggleDrawer?.apply(this,w)}),S(A,ne)}});var ze=x(ge,2);ea(ze,{get open(){return c.isOpen},get settings(){return c.settings},get onSettingsChange(){return c.updateSettings},get onSave(){return c.save},get onCancel(){return c.closeDrawer},get onReset(){return c.reset}}),S(t,W),be()}Ge(["click"]);export{Ka as component,Ua as universal};

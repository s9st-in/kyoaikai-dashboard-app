import"../chunks/DsnmJJEf.js";import{aA as de,u as ue,g as ce,j as le,p as ye,ab as z,ac as me,t as b,D as e,a as h,b as ge,s as y,d as n,c as k,r as s,w as he,ad as J,aB as f,v as fe,a9 as pe,f as ve}from"../chunks/DpxnEjv3.js";import{s as x}from"../chunks/uPQLbuGZ.js";import{i as E}from"../chunks/CVlXRTK-.js";import{e as I}from"../chunks/D1R3K8Lx.js";import{i as be,b as xe,r as ke,A as we}from"../chunks/DnIcTvC1.js";import{M as Me}from"../chunks/BJigBDmL.js";function De(r,a,i=a){de(r,"change",d=>{var _=d?r.defaultChecked:r.checked;i(_)}),(le&&r.defaultChecked!==r.checked||ue(a)==null)&&i(r.checked),ce(()=>{var d=a();r.checked=!!d})}const Se={id:"normal",name:"通常値",description:"平常時の典型的なデータ",data:{kyoritsu_ambulance:12,kyoritsu_new_admission:8,kyoritsu_avg_stay:14.2,kyoritsu_bed_usage:87.5,kyoritsu_empty_beds:15,kyoritsu_ext_home_return_rate:72.3,kyoritsu_ext_bed_usage:82.1,kyoritsu_ext_empty_beds:22,reha_empty_beds:8,reha_bed_usage:91.2,reha_performance_index:42.8,reha_home_admission_rate:65.4,reha_home_return_rate:78.9,reha_ext_long_stay_patients:23,reha_ext_bed_usage:85.6}},Ee={id:"high_load",name:"高負荷",description:"繁忙期・緊急時のデータ",data:{kyoritsu_ambulance:28,kyoritsu_new_admission:18,kyoritsu_avg_stay:12.1,kyoritsu_bed_usage:98.5,kyoritsu_empty_beds:2,kyoritsu_ext_home_return_rate:68.1,kyoritsu_ext_bed_usage:95.3,kyoritsu_ext_empty_beds:5,reha_empty_beds:1,reha_bed_usage:99.1,reha_performance_index:48.2,reha_home_admission_rate:58.7,reha_home_return_rate:71.2,reha_ext_long_stay_patients:35,reha_ext_bed_usage:97.8}},Ie={id:"low_load",name:"低稼働",description:"閑散期のデータ",data:{kyoritsu_ambulance:3,kyoritsu_new_admission:2,kyoritsu_avg_stay:18.5,kyoritsu_bed_usage:52.3,kyoritsu_empty_beds:58,kyoritsu_ext_home_return_rate:81.2,kyoritsu_ext_bed_usage:48.7,kyoritsu_ext_empty_beds:65,reha_empty_beds:32,reha_bed_usage:61.5,reha_performance_index:35.1,reha_home_admission_rate:78.3,reha_home_return_rate:88.5,reha_ext_long_stay_patients:8,reha_ext_bed_usage:55.2}},$e={id:"boundary",name:"境界値",description:"エッジケースのテスト用",data:{kyoritsu_ambulance:0,kyoritsu_new_admission:0,kyoritsu_avg_stay:0,kyoritsu_bed_usage:100,kyoritsu_empty_beds:0,kyoritsu_ext_home_return_rate:100,kyoritsu_ext_bed_usage:0,kyoritsu_ext_empty_beds:999,reha_empty_beds:0,reha_bed_usage:100,reha_performance_index:99.9,reha_home_admission_rate:100,reha_home_return_rate:100,reha_ext_long_stay_patients:0,reha_ext_bed_usage:100}},Te={id:"missing",name:"欠損値",description:"データ欠損時の表示確認用",data:{kyoritsu_ambulance:12,kyoritsu_new_admission:null,kyoritsu_avg_stay:14.2,kyoritsu_bed_usage:null,kyoritsu_empty_beds:15,kyoritsu_ext_home_return_rate:null,kyoritsu_ext_bed_usage:82.1,kyoritsu_ext_empty_beds:null,reha_empty_beds:8,reha_bed_usage:null,reha_performance_index:42.8,reha_home_admission_rate:null,reha_home_return_rate:78.9,reha_ext_long_stay_patients:null,reha_ext_bed_usage:85.6}},P=[Se,Ee,Ie,$e,Te],Ae="normal";function Ce(r){return P.find(a=>a.id===r)}const Le=[{id:"kyoritsu",name:"戸畑共立病院",shortName:"共立"},{id:"reha",name:"戸畑リハビリテーション病院",shortName:"リハ"}],Ve=[{id:"kyoritsu_ambulance",title:"救急車搬入数",unit:"件",category:"全体",source:"self",facility:"kyoritsu",order:1},{id:"kyoritsu_new_admission",title:"新規入院患者数",unit:"人",category:"全体",source:"self",facility:"kyoritsu",order:2},{id:"kyoritsu_avg_stay",title:"平均在院日数",unit:"日",category:"全体",source:"self",facility:"kyoritsu",order:3},{id:"kyoritsu_bed_usage",title:"病床利用率",unit:"%",category:"病棟/フロア別",source:"self",facility:"kyoritsu",order:4},{id:"kyoritsu_empty_beds",title:"空床数",unit:"床",category:"病棟/フロア別",source:"self",facility:"kyoritsu",order:5},{id:"kyoritsu_ext_home_return_rate",title:"在宅からの復帰率",unit:"%",category:"全体",source:"external",facility:"kyoritsu",order:6},{id:"kyoritsu_ext_bed_usage",title:"病床利用率",unit:"%",category:"全体",source:"external",facility:"kyoritsu",order:7},{id:"kyoritsu_ext_empty_beds",title:"空床数",unit:"床",category:"全体",source:"external",facility:"kyoritsu",order:8}],Re=[{id:"reha_empty_beds",title:"空床数",unit:"床",category:"全体",source:"self",facility:"reha",order:1},{id:"reha_bed_usage",title:"病床利用率",unit:"%",category:"機能別",source:"self",facility:"reha",order:2},{id:"reha_performance_index",title:"実績指数",unit:"",category:"回復期",source:"self",facility:"reha",order:3},{id:"reha_home_admission_rate",title:"在宅からの入院率",unit:"%",category:"地域包括ケア",source:"self",facility:"reha",order:4},{id:"reha_home_return_rate",title:"在宅復帰率",unit:"%",category:"地域包括ケア",source:"self",facility:"reha",order:5},{id:"reha_ext_long_stay_patients",title:"長期入院患者数",unit:"人",category:"全体",source:"external",facility:"reha",order:6},{id:"reha_ext_bed_usage",title:"病床利用率",unit:"%",category:"全体",source:"external",facility:"reha",order:7}],Fe=[{id:"debug_metric_1",title:"デバッグ用指標1",unit:"",category:"デバッグ",source:"self",facility:"kyoritsu",environments:["development"],order:99},{id:"debug_metric_2",title:"デバッグ用指標2",unit:"",category:"デバッグ",source:"self",facility:"reha",environments:["development"],order:99}],Ne=[...Ve,...Re,...Fe];function Be(r){return Ne.filter(a=>a.facility===r&&be(a.environments)).sort((a,i)=>(a.order??0)-(i.order??0))}function G(r){const a=Be(r),i=[],d=new Map;for(const _ of a){const m=`${_.source}:${_.category}`;d.has(m)||d.set(m,[]),d.get(m).push(_)}for(const[_,m]of d){const[D,$]=_.split(":");i.push({source:D,sourceLabel:D==="self"?"自施設で掲載":"他施設から取得",category:$,metrics:m})}return i.sort((_,m)=>_.source!==m.source?_.source==="self"?-1:1:0)}function Oe(r,a){if(r==null)return"--";const i=Number.isInteger(r)?r.toString():r.toFixed(1);return a?`${i} ${a}`:i}var Ge=k("<option> <!></option>"),Pe=k('<p class="text-sm text-gray-600 dark:text-gray-400"> </p>'),Ue=k('<span class="text-sm"> </span>'),Ye=k('<div class="space-y-2"><h3 class="text-lg font-medium text-gray-600 dark:text-gray-400"> <!></h3> <div class="grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5"></div></div>'),je=k('<section class="space-y-4"><h2 class="text-xl font-semibold"> </h2> <!></section>'),He=k('<div class="container mx-auto space-y-6 p-4"><div class="card-base space-y-4 p-4"><h2 class="text-lg font-semibold">表示設定</h2> <div class="flex flex-wrap items-center gap-4"><div class="flex items-center gap-2"><label for="data-set" class="text-sm font-medium">テストデータ:</label> <select id="data-set" class="rounded border border-gray-300 bg-white px-3 py-1.5 text-sm dark:border-gray-600 dark:bg-gray-800"></select></div> <label class="flex items-center gap-2 text-sm"><input type="checkbox" class="h-4 w-4 rounded border-gray-300"/> <span>開発専用カードを表示</span></label> <div class="ml-auto text-sm text-gray-500">環境: <span class="font-mono font-semibold"> </span></div></div> <!></div> <!></div>');function Ze(r,a){ye(a,!0);let i=z(me(Ae));const d=f(()=>Ce(e(i))??P[0]);let _=z(!0);function m(t){return G(t)}function D(t){const o=e(d).data[t],l=G("kyoritsu").flatMap(u=>u.metrics).concat(G("reha").flatMap(u=>u.metrics)).find(u=>u.id===t);return Oe(o,l?.unit??"")}function $(t){return e(d).data[t]??null}const Q=f(()=>e(_));var T=He(),A=n(T),C=y(n(A),2),L=n(C),V=y(n(L),2);I(V,21,()=>P,t=>t.id,(t,o)=>{var l=Ge(),u=n(l),w=y(u);{var F=g=>{var p=fe();b(()=>x(p,`- ${e(o).description??""}`)),h(g,p)};E(w,g=>{e(o).description&&g(F)})}s(l);var S={};b(()=>{x(u,`${e(o).name??""} `),S!==(S=e(o).id)&&(l.value=(l.__value=e(o).id)??"")}),h(t,l)}),s(V),s(L);var R=y(L,2),U=n(R);ke(U),he(2),s(R);var Y=y(R,2),j=y(n(Y)),X=n(j,!0);s(j),s(Y),s(C);var Z=y(C,2);{var ee=t=>{var o=Pe(),l=n(o,!0);s(o),b(()=>x(l,e(d).description)),h(t,o)};E(Z,t=>{e(d).description&&t(ee)})}s(A);var te=y(A,2);I(te,17,()=>Le,t=>t.id,(t,o)=>{const l=f(()=>m(e(o).id));var u=je(),w=n(u),F=n(w,!0);s(w);var S=y(w,2);I(S,17,()=>e(l),g=>`${g.source}:${g.category}`,(g,p)=>{const H=f(()=>e(p).metrics.filter(M=>!M.id.startsWith("debug_")));var K=pe(),re=ve(K);{var ae=M=>{var N=Ye(),B=n(N),W=n(B),se=y(W);{var ie=v=>{var c=Ue(),O=n(c);s(c),b(()=>x(O,`（${e(p).category??""}）`)),h(v,c)};E(se,v=>{e(p).category!=="全体"&&v(ie)})}s(B);var q=y(B,2);I(q,21,()=>e(H),v=>v.id,(v,c)=>{{let O=f(()=>D(e(c).id)),oe=f(()=>e(c).category!=="全体"?e(c).category:void 0),_e=f(()=>"dev"),ne=f(()=>({metricId:e(c).id,unit:e(c).unit,rawValue:$(e(c).id),source:e(c).source,facility:e(o).id,dataSetId:e(i)}));Me(v,{get title(){return e(c).title},get value(){return e(O)},get subtitle(){return e(oe)},badge:"DEV",get variant(){return e(_e)},get devInfo(){return e(ne)}})}}),s(q),s(N),b(()=>x(W,`${e(p).sourceLabel??""} `)),h(M,N)};E(re,M=>{e(H).length>0&&e(Q)&&M(ae)})}h(g,K)}),s(u),b(()=>x(F,e(o).name)),h(t,u)}),s(T),b(()=>x(X,we)),xe(V,()=>e(i),t=>J(i,t)),De(U,()=>e(_),t=>J(_,t)),h(r,T),ge()}export{Ze as component};

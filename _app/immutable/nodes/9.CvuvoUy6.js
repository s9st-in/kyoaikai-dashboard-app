import"../chunks/Dh3huXxZ.js";import{l as ne,M as Q}from"../chunks/BhIsClV-.js";import{m as He}from"../chunks/aTZK_S6W.js";import{g as Ke}from"../chunks/OCDTGWHg.js";import{g as je,c as We,d as ze,r as Xe,a as qe,T as Je,p as we,n as Qe,t as Ze,u as $e,b as et,s as ye}from"../chunks/DXprL8kV.js";import"../chunks/DsnmJJEf.js";import{p as L,k as x,d as I,a as y,b as w,g as a,u as c,aP as Se,c as R,n as ie,r as _,f as P,b2 as Z,b5 as tt,s as B,l as Fe,a6 as at,t as _e,h as C,i as V,ad as rt,a4 as nt,j as he,o as ot,bb as st,$ as it}from"../chunks/p4dYvpg6.js";import{h as lt}from"../chunks/COZkYLhp.js";import{b as Me}from"../chunks/vwVNdKjP.js";import{b as ct}from"../chunks/CM1W8w0u.js";import{R as dt,b as ut,c as gt,d as ft,s as vt,F as ht,D as bt}from"../chunks/Djjv-p_d.js";import{r as $,b as le,s as be,e as ce,p as mt,c as De,k as Tt,m as ge,n as me}from"../chunks/OQgd7Oh0.js";import{c as yt,h as xe,m as ee,u as Dt,b as pt,e as Ce,p as Ct,n as X,j as se,k as Ae,l as It}from"../chunks/CS60pbwF.js";import{a8 as de,h as W,p as St,a9 as _t,a5 as xt,j as Rt,q as Pt,x as At,a as Et,L as Re,O as Lt,aa as wt,ab as Ft,e as J,ac as Mt,V as Vt,s as Nt,P as Ot,a0 as Bt,ad as Ut,ae as kt,af as Gt,_ as Yt,$ as Ht,ag as Kt,ah as jt,ai as Wt,aj as zt}from"../chunks/CQy8OeFy.js";import{o as Pe,s as Ve}from"../chunks/T2Bmc5lN.js";import{I as Ne}from"../chunks/5xWOmKaz.js";import"../chunks/P7rPqgRT.js";import{b as Xt,a as pe,g as qt,D as Jt,c as Qt,d as Oe}from"../chunks/C3ChFxzh.js";import"../chunks/xh2F44ca.js";import{M as Zt}from"../chunks/BYYwbIbG.js";import"../chunks/B3FzVGZu.js";import"../chunks/CuRQ2e7u.js";import{s as A}from"../chunks/BcvOLtEm.js";import{i as U}from"../chunks/36Dr0qmW.js";import{b as te,d as $t}from"../chunks/Cq4yWqvx.js";const q=yt();var ea=Et("tabs").parts("root","list","trigger","content","indicator"),re=ea.build(),ta=t=>t.ids?.root??`tabs:${t.id}`,oe=t=>t.ids?.list??`tabs:${t.id}:list`,Ie=(t,e)=>t.ids?.content?.(e)??`tabs:${t.id}:content-${e}`,z=(t,e)=>t.ids?.trigger?.(e)??`tabs:${t.id}:trigger-${e}`,Be=t=>t.ids?.indicator??`tabs:${t.id}:indicator`,aa=t=>t.getById(oe(t)),ra=(t,e)=>t.getById(Ie(t,e)),fe=(t,e)=>e!=null?t.getById(z(t,e)):null,Ee=t=>t.getById(Be(t)),ae=t=>{const r=`[role=tab][data-ownedby='${CSS.escape(oe(t))}']:not([disabled])`;return Bt(aa(t),r)},na=t=>Ht(ae(t)),oa=t=>Yt(ae(t)),sa=(t,e)=>Gt(ae(t),z(t,e.value),e.loopFocus),ia=(t,e)=>kt(ae(t),z(t,e.value),e.loopFocus),Ue=t=>({x:t?.offsetLeft??0,y:t?.offsetTop??0,width:t?.offsetWidth??0,height:t?.offsetHeight??0}),la=(t,e)=>{const r=Ut(ae(t),z(t,e));return Ue(r)};function ca(t,e){const{state:r,send:n,context:s,prop:i,scope:u}=t,o=i("translations"),f=r.matches("focused"),v=i("orientation")==="vertical",D=i("orientation")==="horizontal",g=i("composite");function d(l){return{selected:s.get("value")===l.value,focused:s.get("focusedValue")===l.value,disabled:!!l.disabled}}return{value:s.get("value"),focusedValue:s.get("focusedValue"),setValue(l){n({type:"SET_VALUE",value:l})},clearValue(){n({type:"CLEAR_VALUE"})},setIndicatorRect(l){const h=z(u,l);n({type:"SET_INDICATOR_RECT",id:h})},syncTabIndex(){n({type:"SYNC_TAB_INDEX"})},selectNext(l){n({type:"TAB_FOCUS",value:l,src:"selectNext"}),n({type:"ARROW_NEXT",src:"selectNext"})},selectPrev(l){n({type:"TAB_FOCUS",value:l,src:"selectPrev"}),n({type:"ARROW_PREV",src:"selectPrev"})},focus(){const l=s.get("value");l&&fe(u,l)?.focus()},getRootProps(){return e.element({...re.root.attrs,id:ta(u),"data-orientation":i("orientation"),"data-focus":W(f),dir:i("dir")})},getListProps(){return e.element({...re.list.attrs,id:oe(u),role:"tablist",dir:i("dir"),"data-focus":W(f),"aria-orientation":i("orientation"),"data-orientation":i("orientation"),"aria-label":o?.listLabel,onKeyDown(l){if(l.defaultPrevented||xt(l)||!Rt(l.currentTarget,Pt(l)))return;const h={ArrowDown(){D||n({type:"ARROW_NEXT",key:"ArrowDown"})},ArrowUp(){D||n({type:"ARROW_PREV",key:"ArrowUp"})},ArrowLeft(){v||n({type:"ARROW_PREV",key:"ArrowLeft"})},ArrowRight(){v||n({type:"ARROW_NEXT",key:"ArrowRight"})},Home(){n({type:"HOME"})},End(){n({type:"END"})}};let T=At(l,{dir:i("dir"),orientation:i("orientation")});const b=h[T];if(b){l.preventDefault(),b(l);return}}})},getTriggerState:d,getTriggerProps(l){const{value:h,disabled:T}=l,b=d(l);return e.button({...re.trigger.attrs,role:"tab",type:"button",disabled:T,dir:i("dir"),"data-orientation":i("orientation"),"data-disabled":W(T),"aria-disabled":T,"data-value":h,"aria-selected":b.selected,"data-selected":W(b.selected),"data-focus":W(b.focused),"aria-controls":b.selected?Ie(u,h):void 0,"data-ownedby":oe(u),"data-ssr":W(s.get("ssr")),id:z(u,h),tabIndex:b.selected&&g?0:-1,onFocus(){n({type:"TAB_FOCUS",value:h})},onBlur(m){m.relatedTarget?.getAttribute("role")!=="tab"&&n({type:"TAB_BLUR"})},onClick(m){m.defaultPrevented||St(m)||T||(_t()&&m.currentTarget.focus(),n({type:"TAB_CLICK",value:h}))}})},getContentProps(l){const{value:h}=l,T=s.get("value")===h;return e.element({...re.content.attrs,dir:i("dir"),id:Ie(u,h),tabIndex:g?0:-1,"aria-labelledby":z(u,h),role:"tabpanel","data-ownedby":oe(u),"data-selected":W(T),"data-orientation":i("orientation"),hidden:!T})},getIndicatorProps(){const l=s.get("indicatorRect"),h=l==null||l.width===0&&l.height===0&&l.x===0&&l.y===0;return e.element({id:Be(u),...re.indicator.attrs,dir:i("dir"),"data-orientation":i("orientation"),hidden:h,style:{"--transition-property":"left, right, top, bottom, width, height","--left":de(l?.x),"--top":de(l?.y),"--width":de(l?.width),"--height":de(l?.height),position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:"var(--transition-duration, 150ms)",transitionTimingFunction:"var(--transition-timing-function)",[D?"left":"top"]:D?"var(--left)":"var(--top)"}})}}}var{createMachine:da}=Nt(),ua=da({props({props:t}){return{dir:"ltr",orientation:"horizontal",activationMode:"automatic",loopFocus:!0,composite:!0,navigate(e){Vt(e.node)},defaultValue:null,...t}},initialState(){return"idle"},context({prop:t,bindable:e}){return{value:e(()=>({defaultValue:t("defaultValue"),value:t("value"),onChange(r){t("onValueChange")?.({value:r})}})),focusedValue:e(()=>({defaultValue:t("value")||t("defaultValue"),sync:!0,onChange(r){t("onFocusChange")?.({focusedValue:r})}})),ssr:e(()=>({defaultValue:!0})),indicatorRect:e(()=>({defaultValue:null}))}},watch({context:t,prop:e,track:r,action:n}){r([()=>t.get("value")],()=>{n(["syncIndicatorRect","syncTabIndex","navigateIfNeeded"])}),r([()=>e("dir"),()=>e("orientation")],()=>{n(["syncIndicatorRect"])})},on:{SET_VALUE:{actions:["setValue"]},CLEAR_VALUE:{actions:["clearValue"]},SET_INDICATOR_RECT:{actions:["setIndicatorRect"]},SYNC_TAB_INDEX:{actions:["syncTabIndex"]}},entry:["syncIndicatorRect","syncTabIndex","syncSsr"],exit:["cleanupObserver"],states:{idle:{on:{TAB_FOCUS:{target:"focused",actions:["setFocusedValue"]},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{actions:["setFocusedValue","setValue"]},ARROW_PREV:[{guard:"selectOnFocus",actions:["focusPrevTab","selectFocusedTab"]},{actions:["focusPrevTab"]}],ARROW_NEXT:[{guard:"selectOnFocus",actions:["focusNextTab","selectFocusedTab"]},{actions:["focusNextTab"]}],HOME:[{guard:"selectOnFocus",actions:["focusFirstTab","selectFocusedTab"]},{actions:["focusFirstTab"]}],END:[{guard:"selectOnFocus",actions:["focusLastTab","selectFocusedTab"]},{actions:["focusLastTab"]}],TAB_FOCUS:{actions:["setFocusedValue"]},TAB_BLUR:{target:"idle",actions:["clearFocusedValue"]}}}},implementations:{guards:{selectOnFocus:({prop:t})=>t("activationMode")==="automatic"},actions:{selectFocusedTab({context:t,prop:e}){J(()=>{const r=t.get("focusedValue");if(!r)return;const s=e("deselectable")&&t.get("value")===r?null:r;t.set("value",s)})},setFocusedValue({context:t,event:e,flush:r}){e.value!=null&&r(()=>{t.set("focusedValue",e.value)})},clearFocusedValue({context:t}){t.set("focusedValue",null)},setValue({context:t,event:e,prop:r}){const n=r("deselectable")&&t.get("value")===t.get("focusedValue");t.set("value",n?null:e.value)},clearValue({context:t}){t.set("value",null)},focusFirstTab({scope:t}){J(()=>{na(t)?.focus()})},focusLastTab({scope:t}){J(()=>{oa(t)?.focus()})},focusNextTab({context:t,prop:e,scope:r,event:n}){const s=n.value??t.get("focusedValue");if(!s)return;const i=sa(r,{value:s,loopFocus:e("loopFocus")});J(()=>{e("composite")?i?.focus():i?.dataset.value!=null&&t.set("focusedValue",i.dataset.value)})},focusPrevTab({context:t,prop:e,scope:r,event:n}){const s=n.value??t.get("focusedValue");if(!s)return;const i=ia(r,{value:s,loopFocus:e("loopFocus")});J(()=>{e("composite")?i?.focus():i?.dataset.value!=null&&t.set("focusedValue",i.dataset.value)})},syncTabIndex({context:t,scope:e}){J(()=>{const r=t.get("value");if(!r)return;const n=ra(e,r);if(!n)return;Mt(n).length>0?n.removeAttribute("tabindex"):n.setAttribute("tabindex","0")})},cleanupObserver({refs:t}){const e=t.get("indicatorCleanup");e&&e()},setIndicatorRect({context:t,event:e,scope:r}){const n=e.id??t.get("value");!Ee(r)||!n||!fe(r,n)||t.set("indicatorRect",la(r,n))},syncSsr({context:t}){t.set("ssr",!1)},syncIndicatorRect({context:t,refs:e,scope:r}){const n=e.get("indicatorCleanup");if(n&&n(),!Ee(r))return;const i=()=>{const f=fe(r,t.get("value"));if(!f)return;const v=Ue(f);t.set("indicatorRect",D=>Ot(D,v)?D:v)};i();const u=ae(r),o=wt(...u.map(f=>Ft.observe(f,i)));e.set("indicatorCleanup",o)},navigateIfNeeded({context:t,prop:e,scope:r}){const n=t.get("value");if(!n)return;const s=fe(r,n);Lt(s)&&e("navigate")?.({value:n,node:s,href:s.href})}}}}),ga=xe()(["activationMode","composite","deselectable","dir","getRootNode","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value","defaultValue"]),fa=Re(ga),va=xe()(["disabled","value"]),ha=Re(va),ba=xe()(["value"]),ma=Re(ba),Ta=P("<div><!></div>");function ya(t,e){L(e,!0);const r=$(e,["$$slots","$$events","$$legacy"]),n=q.consume(),s=c(()=>ma(r)),i=c(()=>Se(a(s),2)),u=c(()=>a(i)[0]),o=c(()=>a(i)[1]),f=c(()=>a(o).element),v=c(()=>a(o).children),D=c(()=>Z(a(o),["element","children"])),g=c(()=>ee(n().getContentProps(a(u)),a(D)));var d=x(),l=I(d);{var h=b=>{var m=x(),p=I(m);A(p,()=>a(f),()=>a(g)),y(b,m)},T=b=>{var m=Ta();te(m,()=>({...a(g)}));var p=R(m);A(p,()=>a(v)??ie),_(m),y(b,m)};U(l,b=>{a(f)?b(h):b(T,!1)})}y(t,d),w()}var Da=P("<div></div>");function pa(t,e){L(e,!0);const r=$(e,["$$slots","$$events","$$legacy"]),n=q.consume(),s=c(()=>e.element),i=c(()=>Z(r,["element"])),u=c(()=>ee(n().getIndicatorProps(),a(i)));var o=x(),f=I(o);{var v=g=>{var d=x(),l=I(d);A(l,()=>a(s),()=>a(u)),y(g,d)},D=g=>{var d=Da();te(d,()=>({...a(u)})),y(g,d)};U(f,g=>{a(s)?g(v):g(D,!1)})}y(t,o),w()}var Ca=P("<div><!></div>");function Ia(t,e){L(e,!0);const r=$(e,["$$slots","$$events","$$legacy"]),n=q.consume(),s=c(()=>e.element),i=c(()=>e.children),u=c(()=>Z(r,["element","children"])),o=c(()=>ee(n().getListProps(),a(u)));var f=x(),v=I(f);{var D=d=>{var l=x(),h=I(l);A(h,()=>a(s),()=>a(o)),y(d,l)},g=d=>{var l=Ca();te(l,()=>({...a(o)}));var h=R(l);A(h,()=>a(i)??ie),_(l),y(d,l)};U(v,d=>{a(s)?d(D):d(g,!1)})}y(t,f),w()}function Sa(t,e){L(e,!0);const r=q.consume(),n=c(()=>e.children);var s=x(),i=I(s);A(i,()=>a(n),()=>r),y(t,s),w()}var _a=P("<div><!></div>");function xa(t,e){L(e,!0);const r=$(e,["$$slots","$$events","$$legacy"]),n=c(()=>e.element),s=c(()=>e.children),i=c(()=>e.value),u=c(()=>Z(r,["element","children","value"])),o=c(()=>ee(a(i)().getRootProps(),a(u)));q.provide(()=>a(i)());var f=x(),v=I(f);{var D=d=>{var l=x(),h=I(l);A(h,()=>a(n),()=>a(o)),y(d,l)},g=d=>{var l=_a();te(l,()=>({...a(o)}));var h=R(l);A(h,()=>a(s)??ie),_(l),y(d,l)};U(v,d=>{a(n)?d(D):d(g,!1)})}y(t,f),w()}function Ra(t){const e=Dt(ua,t),r=c(()=>ca(e,pt));return()=>a(r)}var Pa=P("<div><!></div>");function Aa(t,e){const r=tt();L(e,!0);const n=$(e,["$$slots","$$events","$$legacy"]),s=c(()=>fa(n)),i=c(()=>Se(a(s),2)),u=c(()=>a(i)[0]),o=c(()=>a(i)[1]),f=c(()=>a(o).element),v=c(()=>a(o).children),D=c(()=>Z(a(o),["element","children"])),g=Ra(()=>({...a(u),id:r})),d=c(()=>ee(g().getRootProps(),a(D)));q.provide(()=>g());var l=x(),h=I(l);{var T=m=>{var p=x(),S=I(p);A(S,()=>a(f),()=>a(d)),y(m,p)},b=m=>{var p=Pa();te(p,()=>({...a(d)}));var S=R(p);A(S,()=>a(v)??ie),_(p),y(m,p)};U(h,m=>{a(f)?m(T):m(b,!1)})}y(t,l),w()}var Ea=P("<button><!></button>");function La(t,e){L(e,!0);const r=$(e,["$$slots","$$events","$$legacy"]),n=q.consume(),s=c(()=>ha(r)),i=c(()=>Se(a(s),2)),u=c(()=>a(i)[0]),o=c(()=>a(i)[1]),f=c(()=>a(o).element),v=c(()=>a(o).children),D=c(()=>Z(a(o),["element","children"])),g=c(()=>ee(n().getTriggerProps(a(u)),a(D)));var d=x(),l=I(d);{var h=b=>{var m=x(),p=I(m);A(p,()=>a(f),()=>a(g)),y(b,m)},T=b=>{var m=Ea();te(m,()=>({...a(g)}));var p=R(m);A(p,()=>a(v)??ie),_(m),y(b,m)};U(l,b=>{a(f)?b(h):b(T,!1)})}y(t,d),w()}const ue=Object.assign(Aa,{Provider:xa,Context:Sa,List:Ia,Trigger:La,Indicator:pa,Content:ya});function wa(t,e){return{type:"suiyokai",title:t?.title||"水曜会",icon:"groups",items:t?.items||[],loading:e}}function Fa(t,e){return{type:"announcement",title:"お知らせ",icon:"campaign",items:t||[],loading:e}}function Ma(t,e){L(e,!0);const r=c(()=>le.getData()),n=c(()=>le.isLoading()),s=c(()=>wa(a(r),a(n)));Pe(()=>((async()=>{try{await le.fetch()}catch(i){ne.error("[SuiyokaiInfoCard] Data fetch failed:",i)}})(),()=>{le.abort()})),Ne(t,be(()=>a(s))),w()}function Va(t,e){L(e,!0);const r=c(()=>ce.getData()),n=c(()=>ce.isLoading()),s=c(()=>Fa(a(r),a(n)));Pe(()=>((async()=>{try{await ce.fetch()}catch(i){ne.error("[AnnouncementInfoCard] Data fetch failed:",i)}})(),()=>{ce.abort()})),Ne(t,be(()=>a(s))),w()}var Na=P('<span class="inline-flex flex-1"><!></span>'),Oa=P("<!> <!>",1),Ba=P('<div class="relative flex flex-1 flex-col pt-3"><!></div>');function Ua(t,e){L(e,!0);let r=mt(e,"containerElement",15,null);const n=c(()=>Xt(void 0,e.boardFeatures));var s=Ba(),i=R(s);ue(i,{get value(){return e.value},get onValueChange(){return e.onValueChange},class:"flex flex-1 flex-col",children:(u,o)=>{var f=Oa(),v=I(f);De(v,()=>ue.List,(g,d)=>{d(g,{class:"mb-0 flex gap-5 border-b-0 px-4 pb-0 md:px-8","aria-label":"ボードタブナビゲーション",children:(l,h)=>{var T=x(),b=I(T);Ce(b,17,()=>a(n),m=>m.id,(m,p)=>{var S=Na(),G=R(S);De(G,()=>ue.Trigger,(Y,H)=>{H(Y,{get value(){return a(p).id},get class(){return a(p).triggerClass},children:(k,E)=>{Fe();var F=at();_e(()=>Ve(F,a(p).label)),y(k,F)},$$slots:{default:!0}})}),_(S),y(m,S)}),y(l,T)},$$slots:{default:!0}})});var D=B(v,2);Ce(D,17,()=>a(n),g=>g.id,(g,d)=>{var l=x(),h=I(l);De(h,()=>ue.Content,(T,b)=>{b(T,{get value(){return a(d).id},get class(){return`bg-page relative flex flex-1 flex-col border-t-3 ${a(d).borderColorLight??""} dark:${a(d).borderColorDark??""}`},children:(m,p)=>{var S=x(),G=I(S);{var Y=E=>{var F=x(),O=I(F);A(O,()=>e.boardContent),y(E,F)},H=E=>{var F=x(),O=I(F);A(O,()=>e.dataContent),y(E,F)},k=E=>{var F=x(),O=I(F);A(O,()=>e.reportContent),y(E,F)};U(G,E=>{a(d).id==="board"?E(Y):a(d).id==="data"?E(H,1):a(d).id==="report"&&e.reportContent&&E(k,2)})}y(m,S)},$$slots:{default:!0}})}),y(g,l)}),y(u,f)},$$slots:{default:!0}}),_(s),Me(s,u=>r(u),()=>r()),y(t,s),w()}var ka=P('<div class="mb-6"><!></div>'),Ga=P('<div class="card-base mb-5 flex flex-col items-start gap-2 p-4 md:flex-row md:items-center md:justify-between"><div class="flex items-center gap-3"><span class="material-symbols-outlined text-primary-ui rounded-md bg-sky-50 p-1.5 dark:bg-sky-900/30">calendar_today</span> <span class="font-medium text-slate-700 dark:text-slate-200"> </span></div> <span class="text-tertiary text-sm">指標カードをクリックすると詳細グラフを表示します</span></div> <div class="grid grid-cols-2 gap-5 md:grid-cols-3 lg:grid-cols-4" aria-label="経営指標カード一覧"></div>',1),Ya=P('<section class="px-4 py-6 md:px-8" aria-label="ボード"><!> <!></section>');function Ha(t,e){L(e,!0);function r(g,d){const l=d[g.dataKey];return{dataKey:g.dataKey,rawValue:l??"N/A",unit:g.unit||"(なし)",order:g.order,...g.source&&{source:g.source},...g.isDev!==void 0&&{isDev:g.isDev},...g.environments&&{environments:g.environments.join(", ")}}}const n=c(()=>{if(!e.displayData?.日付)return"";const g=Ct(e.displayData.日付);if(!g)return"";const d=Tt(g);return e.isShowingYesterday?`前日（${d}）のデータを表示しています`:`${d}のデータを表示しています`});var s=Ya(),i=R(s);{var u=g=>{var d=ka(),l=R(d);pe(l,{variant:"error",title:"エラーが発生しました",get message(){return e.error.message}}),_(d),y(g,d)};U(i,g=>{e.error&&g(u)})}var o=B(i,2);{var f=g=>{pe(g,{variant:"loading",title:"読み込み中",message:"データを取得しています…"})},v=g=>{var d=Ga(),l=I(d),h=R(l),T=B(R(h),2),b=R(T,!0);_(T),_(h),Fe(2),_(l);var m=B(l,2);Ce(m,21,()=>e.metrics,p=>p.id,(p,S)=>{{let G=c(()=>qt(a(S),e.displayData)),Y=c(()=>je(a(S))==="dev"?"dev":"default"),H=c(()=>We(a(S))),k=c(()=>ze(a(S),e.devMode)?r(a(S),e.displayData):void 0);Zt(p,{get title(){return a(S).title},get value(){return a(G)},onClick:()=>e.onMetricClick(a(S).id),get variant(){return a(Y)},get badge(){return a(H)},get devInfo(){return a(k)}})}}),_(m),_e(()=>Ve(b,a(n))),y(g,d)},D=g=>{pe(g,{variant:"empty",title:"データがありません",message:"期間や更新状況を確認してください。"})};U(o,g=>{e.isLoading&&!e.displayData?g(f):e.displayData?g(v,1):g(D,!1)})}_(s),y(t,s),w()}function Ka(t,e){Ha(t,{get metrics(){return e.metrics},get displayData(){return e.displayData},get isShowingYesterday(){return e.isShowingYesterday},get isLoading(){return e.isLoading},get error(){return e.error},get devMode(){return e.devMode},get onMetricClick(){return e.onMetricClick}})}var ja=P('<div class="hidden h-full md:flex md:flex-row"><aside class="flex-shrink-0 overflow-y-auto" aria-label="レポートフィルター"><!></aside> <section class="relative min-w-0 flex-1" aria-label="レポート表示"><!></section></div>');function Wa(t,e){L(e,!0);var r=ja(),n=R(r),s=R(n);dt(s,{get hospitalName(){return e.hospitalName},get selectedCategory(){return e.selectedCategory},get dateFrom(){return e.dateFrom},get dateTo(){return e.dateTo},get onCategoryChange(){return e.onCategoryChange},get onDateFromChange(){return e.onDateFromChange},get onDateToChange(){return e.onDateToChange},get onReset(){return e.onReset}}),_(n);var i=B(n,2),u=R(i);ut(u,{get iframeLoading(){return e.iframeLoading},get iframeSrc(){return e.iframeSrc},get title(){return`${e.hospitalName??""}のレポート`},get onIframeLoad(){return e.onIframeLoad},spinnerSize:"lg"}),_(i),_(r),_e(()=>$t(n,`width: ${Kt.METRICS_PANEL_WIDTH}px; scrollbar-gutter: stable;`)),y(t,r),w()}var za=P('<div class="flex h-full flex-1" aria-label="レポート"><!> <!></div>');function Xa(t,e){L(e,!0);let r=V(!0),n=V("all"),s=V(""),i=V("");const u=c(()=>"");function o(){C(n,"all"),C(s,""),C(i,"")}function f(b){C(n,b,!0),C(r,!0)}function v(b){C(s,b,!0),C(r,!0)}function D(b){C(i,b,!0),C(r,!0)}function g(){C(r,!1)}const d=c(()=>({hospitalName:e.hospitalName,selectedCategory:a(n),dateFrom:a(s),dateTo:a(i),iframeLoading:a(r),iframeSrc:a(u),onCategoryChange:f,onDateFromChange:v,onDateToChange:D,onReset:o,onIframeLoad:g}));var l=za(),h=R(l);gt(h,be(()=>a(d)));var T=B(h,2);Wa(T,be(()=>a(d))),_(l),y(t,l),w()}const qa=async({data:t})=>{const e=Ke(t.slug),r={slug:t.slug,metricDefinitions:t.metricDefinitions,graphDefinitions:t.graphDefinitions},n=Xe(r),s=qe(r),i={...e,buttons:t.buttons,metrics:n,graphs:s};return{board:t.board,config:i,slug:t.slug,subnavItems:t.subnavItems}},Ur=Object.freeze(Object.defineProperty({__proto__:null,load:qa},Symbol.toStringTag,{value:"Module"}));function Ja(t){let e=V(rt(Jt)),r=V(null),n=null;function s(){n!=null&&(clearTimeout(n),n=null)}function i(){t.tabsContainerRef&&nt().then(()=>{requestAnimationFrame(()=>{if(!t.tabsContainerRef)return;const o=t.tabsContainerRef.getBoundingClientRect(),f=window.scrollY||document.documentElement.scrollTop,v=o.top+f,D=Math.max(0,v-Wt);window.scrollTo({top:D,behavior:"smooth"})})})}function u(o){C(e,Je.parse(o.value),!0),t.onTabChangeUrl?.(a(e)),Qt(a(e))&&(C(r,"tab"),i(),s(),n=setTimeout(()=>{n=null,C(r,null)},jt))}return{get currentTab(){return a(e)},set currentTab(o){C(e,o,!0)},get scrollOperation(){return a(r)},handleTabChange:u,scrollToDataTab:i}}function Qa(t){let e=V(null);function r(s){C(e,s,!0)}function n(){C(e,null)}return he(()=>{if(a(e))return t.setHighlight(a(e)),()=>{t.setHighlight(null)}}),{get selectedMetricId(){return a(e)},set selectedMetricId(s){C(e,s,!0)},handleMetricSelect:r,resetSelection:n}}function Za(t,e=Q){for(let r=t.length-1;r>=0;r--){const n=t[r]?.日付;if(n&&X(n)>=e)return r}return-1}function $a(t,e,r=Q){if(e>0){const n=t[e-1]?.日付;if(n&&X(n)>=r)return e-1}return e}function er(t,e,r,n=Q){if(!t?.length)return null;if(e!==null){const i=se(e,t);return i!==-1?i:null}if(r!==null&&r>=0&&r<t.length)return r;const s=Za(t,n);return s===-1?null:$a(t,s,n)}function tr(t,e,r){return t!==null?t:e!==null&&r?.[e]?.日付?X(r[e].日付):null}function ar(t){const e=c(()=>t().getCurrentDateIndex()),r=c(()=>t().getSelectedDate()),n=c(()=>{const{dashboardData:i}=t();return er(i,a(r),a(e))}),s=c(()=>{const{dashboardData:i}=t();return tr(a(r),a(n),i)});return{get effectiveIndex(){return a(n)},get selectedDateKey(){return a(s)},get currentDateIndex(){return a(e)},get selectedDateState(){return a(r)}}}function rr(t,e,r){if(t===null||t<=0)return!1;const n=e?.[t-1]?.日付;return n?n>=r:!1}function nr(t,e,r){if(t===null||!e?.length||t>=e.length-1)return!1;const n=e[t+1]?.日付;return n?X(n)<=r:!1}function Le(t,e){return t===e}function or(t){const e=c(()=>{const{effectiveIndex:o,dashboardData:f}=t();return rr(o,f,Q)}),r=c(()=>{const{effectiveIndex:o,dashboardData:f}=t();return nr(o,f,ge())}),n=c(()=>Ae(me(),Q)),s=c(()=>Ae(ge(),Q)),i=c(()=>Le(t().selectedDateKey,me())),u=c(()=>Le(t().selectedDateKey,ge()));return{get canGoPrevious(){return a(e)},get canGoNext(){return a(r)},get canGoToYesterday(){return a(n)},get canGoToToday(){return a(s)},get isShowingYesterday(){return a(i)},get isShowingToday(){return a(u)}}}function sr(t){const e=ar(()=>({dashboardData:t().dashboardData,getCurrentDateIndex:t().getCurrentDateIndex,getSelectedDate:t().getSelectedDate})),r=or(()=>({dashboardData:t().dashboardData,effectiveIndex:e.effectiveIndex,selectedDateKey:e.selectedDateKey}));function n(){if(!r.canGoPrevious||e.effectiveIndex===null)return;const o=e.effectiveIndex,f=t(),v=f.dashboardData?.[o-1]?.日付;v&&(f.setSelectedDate(X(v)),f.setCurrentDateIndex(o-1))}function s(){const o=t();if(!r.canGoNext||e.effectiveIndex===null||!o.dashboardData?.length)return;const f=e.effectiveIndex+1,v=o.dashboardData[f]?.日付;v&&(o.setSelectedDate(X(v)),o.setCurrentDateIndex(f))}function i(){const o=t(),f=me();o.setSelectedDate(f);const v=se(f,o.dashboardData);v!==-1&&o.setCurrentDateIndex(v)}function u(){const o=t(),f=ge();o.setSelectedDate(f);const v=se(f,o.dashboardData);v!==-1&&o.setCurrentDateIndex(v)}return he(()=>{const o=t();o.dashboardData?.length&&e.currentDateIndex!==null&&(e.currentDateIndex<0||e.currentDateIndex>=o.dashboardData.length)&&ot(()=>o.resetToLatest())}),{get effectiveIndex(){return e.effectiveIndex},get selectedDate(){return e.selectedDateKey},get canGoPrevious(){return r.canGoPrevious},get canGoNext(){return r.canGoNext},get canGoToYesterday(){return r.canGoToYesterday},get canGoToToday(){return r.canGoToToday},get isShowingYesterday(){return r.isShowingYesterday},get isShowingToday(){return r.isShowingToday},goToPreviousDate:n,goToNextDate:s,goToYesterday:i,goToToday:u}}function ke(){return new URLSearchParams(window.location.hash.slice(1))}function ir(){return we(ke())}async function ve(t){const e=ke(),n={...we(e),...t},s=Qe(n),i=Ze(s);{const u=i.toString();if(window.location.hash.slice(1)===u)return;window.location.hash=u;return}}function lr(t,e){return{tab:t.tab,metricId:t.metricId&&e.includes(t.metricId)?t.metricId:null,date:t.date}}function cr(t,e,r,n){if(Oe(t))return"latest";if(e!==null)return e;if(!r?.length||n===null)return"latest";const s=r[n]?.日付;return s?X(s):"latest"}function dr(t){let e=V(!1),r=V(null);function n(){const u=ir();ne.debug("[useUrlStateSync] applyParamsToState:",u);const o=lr(u,t.sortedMetrics.map(f=>f.id));t.setCurrentTab(o.tab),o.metricId&&t.setSelectedMetricId(o.metricId),o.date!=="latest"?(ne.debug("[useUrlStateSync] setSelectedDate:",o.date),t.setSelectedDate(o.date),C(r,o.date,!0)):(ne.debug("[useUrlStateSync] resetToLatest"),t.resetToLatest())}he(()=>{a(e)&&ve({tab:t.currentTab,metricId:t.selectedMetricId,date:cr(t.currentTab,t.getSelectedDate(),t.dashboardData,t.currentDateIndex)})});function s(u){if(u==="latest"){t.resetToLatest();return}if(t.setSelectedDate(u),t.dashboardData?.length){const o=se(u,t.dashboardData);o!==-1&&t.setCurrentDateIndex(o)}}he(()=>{!a(e)||!a(r)||!t.dashboardData?.length||(s(a(r)),C(r,null))});function i(u){return window.addEventListener("hashchange",u),()=>window.removeEventListener("hashchange",u)}return Pe(()=>{n();const u=i(n);return C(e,!0),u}),{get isUrlInitialized(){return a(e)}}}function ur(t){const{dataTabContext:e}=t,r=Qa({setHighlight:o=>e.setHighlight(o)}),n=Ja({get tabsContainerRef(){return t.tabsContainerRef},onTabChangeUrl:o=>{Oe(o)?ve({tab:o,date:"latest"}):ve({tab:o})}}),s=$e({get slug(){return t.slug},onSlugChange(){e.resetAllStateForFacilitySwitch(),r.resetSelection(),ve({tab:n.currentTab,metricId:null,date:"latest"})}}),i=sr(()=>({dashboardData:s.dashboardData,getCurrentDateIndex:()=>e.dateIndex,getSelectedDate:()=>e.date,setCurrentDateIndex:o=>e.setCurrentDateIndex(o),setSelectedDate:o=>e.setSelectedDate(o),resetToLatest:()=>e.resetToLatest()})),u=et(()=>({dashboardData:s.dashboardData,effectiveIndex:i.effectiveIndex,selectedDate:i.selectedDate}));return dr({get currentTab(){return n.currentTab},get selectedMetricId(){return r.selectedMetricId},get currentDateIndex(){return i.effectiveIndex},get dashboardData(){return s.dashboardData},get sortedMetrics(){return t.sortedMetrics},setCurrentTab:o=>{n.currentTab=o},setSelectedMetricId:o=>{r.selectedMetricId=o},setCurrentDateIndex:o=>e.setCurrentDateIndex(o),resetToLatest:()=>e.resetToLatest(),getSelectedDate:()=>e.date,setSelectedDate:o=>e.setSelectedDate(o)}),{dataSources:s,tabManager:n,metricSelection:r,dateNavigation:i,displayData:u}}var gr=P('<div class="grid grid-cols-1 gap-5 md:grid-cols-2"><!> <!></div>'),fr=P('<div class="mt-5 mb-5 px-4 md:w-1/2 md:px-8"><!></div> <div class="mb-5 px-4 md:px-8"><!></div> <!>',1);function kr(t,e){L(e,!0);const r=c(()=>e.data.config.hospital),n=c(()=>e.data.config.metrics),s=c(()=>e.data.config.graphs),i=c(()=>e.data.config.buttons),u=c(()=>ye(a(i))),o=c(()=>ye(a(n))),f=c(()=>ye(a(s))),v=ft({initialDate:null,initialPeriod:zt});vt(v);let D=V(null),g=V(null);const{dataSources:d,tabManager:l,metricSelection:h,dateNavigation:T,displayData:b}=ur({get slug(){return e.data.slug},dataTabContext:v,get tabsContainerRef(){return a(D)},get sortedMetrics(){return a(o)}});function m(M){const K=me(),j=se(K,d.dashboardData);j!==-1?v.setCurrentDateIndex(j):v.resetToLatest(),l.handleTabChange({value:"data"}),h.handleMetricSelect(M),v.setCompareGraphsVisible(!1)}ct(({from:M,to:K})=>{M?.url.pathname!==K?.url.pathname&&v.clearCompare()});const p=c(()=>({dataDate:b.formattedSelectedDate,canGoPrevious:T.canGoPrevious,canGoNext:T.canGoNext,onPreviousDate:T.goToPreviousDate,onNextDate:T.goToNextDate,canGoToYesterday:T.canGoToYesterday,canGoToToday:T.canGoToToday,isShowingYesterday:T.isShowingYesterday,isShowingToday:T.isShowingToday,onYesterdayDate:T.goToYesterday,onTodayDate:T.goToToday,hasDataForSelectedDate:b.hasDataForSelectedDate,onDateSelect:(M,K)=>{v.setDateAndIndex(M,K)}})),S=c(()=>({period:v.period,onPeriodChange:M=>v.setChartPeriod(M)})),G=c(()=>({metrics:a(o),selectedMetricId:h.selectedMetricId??a(o)[0]?.id??null,onMetricSelect:h.handleMetricSelect,highlightedMetricId:v.highlightedId,scrollOperation:l.scrollOperation})),Y=c(()=>({graphs:a(f),dashboardData:d.dashboardData,selectedDateIndex:T.effectiveIndex,displayData:b.dataDisplayData})),H=c(()=>({isLoading:d.isLoading,hasData:!!d.dashboardData,error:d.error,hasStaleData:d.hasStaleData,onRetry:d.retryFetch,lastUpdatedText:d.lastUpdatedText}));var k=fr();lt("1k039h9",M=>{st(()=>{it.title=`${a(r).name??""} | ${a(r).dashboardTitle??""}（共愛会）`})});var E=I(k),F=R(E);ht(F,{get hospital(){return a(r)},get buttons(){return a(u)}}),_(E);var O=B(E,2),Ge=R(O);It(Ge,{expandLabel:"お知らせを開く",collapseLabel:"閉じる",collapsedHeight:"120px",children:(M,K)=>{var j=gr(),N=R(j);Ma(N,{});var Te=B(N,2);Va(Te,{}),_(j),y(M,j)},$$slots:{default:!0}}),_(O);var Ye=B(O,2);Ua(Ye,{get value(){return l.currentTab},get onValueChange(){return l.handleTabChange},get boardFeatures(){return He[e.data.slug]},get containerElement(){return a(D)},set containerElement(N){C(D,N,!0)},boardContent:N=>{Ka(N,{get metrics(){return a(o)},get displayData(){return b.boardDisplayData},get isShowingYesterday(){return b.boardIsShowingYesterday},get isLoading(){return d.isLoading},get error(){return d.error},get devMode(){return d.devMode},onMetricClick:m})},dataContent:N=>{Me(bt(N,{get navigation(){return a(p)},get period(){return a(S)},get metricSelection(){return a(G)},get graphData(){return a(Y)},get dataState(){return a(H)},get devMode(){return d.devMode}}),Te=>C(g,Te,!0),()=>a(g))},reportContent:N=>{Xa(N,{get slug(){return e.data.slug},get hospitalName(){return a(r).name}})},$$slots:{boardContent:!0,dataContent:!0,reportContent:!0}}),y(t,k),w()}export{kr as component,Ur as universal};

import{r as X}from"../chunks/Cr70dCsX.js";import{b as $}from"../chunks/0F8CCDVG.js";import"../chunks/CyAkH-4i.js";import{e as ee}from"../chunks/B1sSVCCJ.js";import"../chunks/DsnmJJEf.js";import{s as C,c as l,r as i,t as V,a as g,f as x,p as B,g as e,b as E,u as b,aU as H,d as A,ay as te,v as ae,j as re,x as K,M as N,K as ie,$ as se}from"../chunks/Dj_qSXc_.js";import{s as D,d as le}from"../chunks/DGrEk6DV.js";import{i as S,p as z,s as oe}from"../chunks/Cie8SrI_.js";import{h as de}from"../chunks/DYYehU_A.js";import"../chunks/D_zn7YC-.js";import{F as ne}from"../chunks/B9-xpt6i.js";import"../chunks/7QimJVlU.js";import"../chunks/YvPky1bd.js";import{e as O,T as ce,C as ve}from"../chunks/CCr0WPC9.js";import{s as U}from"../chunks/cMrtn-FD.js";import{a as L,c as ue,s as W}from"../chunks/PczVBC9G.js";import{S as ge,T as fe,a as me}from"../chunks/B9A2VU6m.js";import{M as q}from"../chunks/DCurxu3d.js";import{T as Y,u as pe,c as be,a as xe}from"../chunks/DrBvUoO-.js";import"../chunks/_vGz1ruN.js";var he=x('<p class="text-tertiary mt-1 text-sm"> </p>'),ye=x('<div class="flex flex-col items-center justify-center gap-3 p-6 text-center"><div class="bg-surface-secondary rounded-full p-4"><svg class="text-tertiary h-10 w-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h3 class="text-primary text-lg font-semibold"> </h3> <!></div></div>');function J(a,t){var d=ye(),r=C(l(d),2),s=l(r),c=l(s,!0);i(s);var n=C(s,2);{var f=h=>{var m=he(),p=l(m,!0);i(m),V(()=>D(p,t.description)),g(h,m)};S(n,h=>{t.description&&h(f)})}i(r),i(d),V(()=>D(c,t.title)),g(a,d)}const _e={戸畑共立病院:"共立",戸畑リハビリテーション病院:"リハ",あやめの里:"あやめ",明治町クリニック:"明治町"};function Ce(a){return _e[a]??a}function we(a){const{itemCount:t=0,minColumns:d=1,maxColumns:r=4}=a;{const s=Math.min(Math.max(t,d),r);return ke(s)}}function ke(a){switch(a){case 1:return"grid-cols-1";case 2:return"grid-cols-1 sm:grid-cols-2";case 3:return"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3";case 4:return"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4";default:return"grid-cols-1 sm:grid-cols-2"}}function Te(a){const{columns:t,itemCount:d=0}=a;if(t==="auto"){const r=d;return r===1?"grid-cols-1":r===2?"grid-cols-1 lg:grid-cols-2":r===3?"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3":"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4"}switch(t){case 1:return"grid-cols-1";case 2:return"grid-cols-1 md:grid-cols-2";case 3:return"grid-cols-1 md:grid-cols-2 xl:grid-cols-3";case 4:return"grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4";default:return"grid-cols-1 lg:grid-cols-2"}}function Me(a){return{sm:"gap-2",md:"gap-4",lg:"gap-6"}[a.gap]||"gap-4"}var Ve=x("<div></div>");function Se(a,t){B(t,!0);let d=z(t,"columns",3,"auto"),r=z(t,"gap",3,"md");const s=b(()=>Me({gap:r()})),c=b(()=>Te({columns:d(),itemCount:t.items.length}));var n=Ve();O(n,21,()=>t.items,f=>f.key,(f,h)=>{var m=H(),p=A(m);U(p,()=>t.item,()=>e(h)),g(f,m)}),i(n),V(()=>L(n,1,`grid ${e(c)??""} ${e(s)??""}`)),g(a,n),E()}var Fe=x('<p class="text-tertiary mt-1 text-sm"> </p>'),Ie=x('<span class="ml-3 inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-800"> </span>'),je=x('<div class="border-divider bg-card flex h-full flex-col overflow-hidden rounded-lg border shadow-sm"><div class="border-divider bg-page border-b px-5 py-4 dark:bg-slate-700"><div class="flex items-start justify-between"><div class="flex-1"><h2 class="text-primary text-lg font-semibold"> </h2> <!></div> <!></div></div> <div class="flex-1 overflow-auto p-5"><!></div></div>');function Pe(a,t){var d=je(),r=l(d),s=l(r),c=l(s),n=l(c),f=l(n,!0);i(n);var h=C(n,2);{var m=o=>{var u=Fe(),v=l(u,!0);i(u),V(()=>D(v,t.subtitle)),g(o,u)};S(h,o=>{t.subtitle&&o(m)})}i(c);var p=C(c,2);{var y=o=>{var u=Ie(),v=l(u,!0);i(u),V(()=>D(v,t.badge)),g(o,u)};S(p,o=>{t.badge&&o(y)})}i(s),i(r);var w=C(r,2),M=l(w);U(M,()=>t.children),i(w),i(d),V(()=>D(f,t.title)),g(a,d)}var De=x("<div><!></div>"),Ge=x('<section class="relative"><!> <div><!></div></section>');function Ae(a,t){let d=z(t,"stickyHeader",3,!1),r=z(t,"headerZIndex",3,10);const s=b(()=>d()?`sticky top-0 z-[${r()}]`:"");var c=Ge(),n=l(c);{var f=p=>{var y=De(),w=l(y);U(w,()=>t.header),i(y),V(()=>L(y,1,ue(e(s)))),g(p,y)};S(n,p=>{t.header&&p(f)})}var h=C(n,2),m=l(h);U(m,()=>t.children),i(h),i(c),g(a,c)}const ze=async()=>{X(302,`${$}/board/kyoritsu`);try{return{facilities:await ee.fetch()??[]}}catch{return{facilities:[]}}},ht=Object.freeze(Object.defineProperty({__proto__:null,load:ze},Symbol.toStringTag,{value:"Module"})),Q=[{label:"使用病床数",unit:"床",getValue:a=>a.kpis.usedBeds,formatDetail:a=>`${a.kpis.usedBeds} / ${a.beds} 床`,getGaugeValue:a=>a.beds>0?a.kpis.usedBeds/a.beds*100:0},{label:"外来患者数",unit:"人",getValue:a=>a.kpis.outpatients},{label:"入院患者数",unit:"人",getValue:a=>a.kpis.inpatients},{label:"平均在院日数",unit:"日",getValue:a=>a.kpis.avgStayDays},{label:"スタッフ稼働率",unit:"%",getValue:a=>a.kpis.staffUtilization,getGaugeValue:a=>a.kpis.staffUtilization}];var Be=x('<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3" role="region" aria-label="施設の主要指標"></div>');function Ee(a,t){var d=Be();O(d,21,()=>Q,r=>r.label,(r,s)=>{{let c=b(()=>e(s).formatDetail?.(t.facility)??`${e(s).getValue(t.facility)} ${e(s).unit}`),n=b(()=>e(s).getGaugeValue?.(t.facility));q(r,{get title(){return e(s).label},get value(){return e(c)},get gaugeValue(){return e(n)}})}}),i(d),g(a,d)}var Re=x('<section class="border-default bg-card rounded-lg border p-4 shadow-sm"><h3 class="text-secondary m-0 mb-3 text-sm font-semibold"> </h3> <div></div></section>'),He=x('<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3" role="region" aria-label="施設間の指標比較"></div>');function Oe(a,t){B(t,!0);const d=b(()=>we({itemCount:t.facilities.length,maxColumns:3}));var r=He();O(r,21,()=>Q,s=>s.label,(s,c)=>{var n=Re(),f=l(n),h=l(f,!0);i(f);var m=C(f,2);O(m,21,()=>t.facilities,p=>p.id,(p,y)=>{{let w=b(()=>Ce(e(y).name)),M=b(()=>e(c).getValue(e(y))),o=b(()=>e(c).unit);q(p,{get title(){return e(w)},get value(){return`${e(M)??""} ${e(o)??""}`}})}}),i(m),i(n),V(()=>{W(n,"aria-labelledby",`metric-${e(c).label??""}`),W(f,"id",`metric-${e(c).label??""}`),D(h,e(c).label),L(m,1,`grid gap-2 ${e(d)??""}`)}),g(s,n)}),i(r),g(a,r),E()}var Ue=x('<div class="border-default bg-card flex h-full flex-col overflow-hidden rounded-lg border shadow-sm"><div class="flex flex-1 items-center justify-center p-6 text-center"><!></div></div>'),Ze=x('<div class="border-default bg-surface-secondary flex h-64 items-center justify-center rounded-lg border-2 border-dashed"><div class="text-center"><p class="text-secondary text-lg font-medium"> </p> <p class="text-tertiary text-sm">準備中</p></div></div>');function Le(a,t){B(t,!0);let d=z(t,"displayMode",3,"facility");const r=b(()=>t.facilities??(t.facility?[t.facility]:[])),s=b(()=>d()==="view"),c=b(()=>e(r).length===1),n=b(()=>e(r)[0]),f=b(()=>e(s)?Y.find(o=>o.id===t.activeTab)?.label??"不明なビュー":e(c)?e(r)[0].name:`${e(r).length}施設の比較`),h=b(()=>e(s)?e(r).map(o=>o.name).join(" / "):e(c)?`${e(r)[0].type} / ${e(r)[0].beds}床`:""),m=b(()=>e(s)?"ビュー別":"施設別");var p=H(),y=A(p);{var w=o=>{var u=Ue(),v=l(u),_=l(v);J(_,{title:"結果が表示されていません",description:"選択中の条件に一致する施設がありません。"}),i(v),i(u),g(o,u)},M=o=>{Pe(o,{get title(){return e(f)},get subtitle(){return e(h)},get badge(){return e(m)},children:(u,v)=>{var _=H(),F=A(_);{var P=k=>{var j=H(),G=A(j);{var R=T=>{Ee(T,{get facility(){return e(n)}})},Z=T=>{Oe(T,{get facilities(){return e(r)}})};S(G,T=>{e(c)&&e(n)?T(R):T(Z,!1)})}g(k,j)},I=k=>{var j=Ze(),G=l(j),R=l(G),Z=l(R);i(R),te(2),i(G),i(j),V(T=>D(Z,`${T??""}タブ`),[()=>Y.find(T=>T.id===t.activeTab)?.label]),g(k,j)};S(F,k=>{t.activeTab==="overview"?k(P):k(I,!1)})}g(u,_)}})};S(y,o=>{e(r).length===0?o(w):o(M,!1)})}g(a,p),E()}var Ke=x('<div class="flex h-full items-center justify-center text-center"><!></div>'),Ne=x('<div class="overflow-hidden"><!></div>'),We=x('<section id="dashboard-section" class="bg-page flex min-h-screen flex-1 flex-col"><div class="flex flex-1"><!> <div class="flex flex-1 flex-col overflow-hidden"><!> <main class="flex-1 overflow-hidden p-4 sm:p-6 lg:p-8"><!></main></div></div></section>');function Ye(a,t){B(t,!0);const d=pe(),r=b(()=>d.comparisonType),s=b(()=>d.selectedFacilities),c=b(()=>d.sortedViewIds),n=b(()=>e(s).length===0?[]:e(r)==="facility"?e(s).map(v=>({key:v.id,props:{facility:v,activeTab:d.activeTab,displayMode:"facility"}})):e(c).map(v=>({key:v,props:{facilities:e(s),activeTab:v,displayMode:"view"}})));var f=We(),h=l(f),m=l(h);ge(m,{});var p=C(m,2),y=l(p);fe(y,{});var w=C(y,2),M=l(w);{var o=v=>{var _=Ke(),F=l(_);J(F,{title:"絞り込みが行われていません",description:"上部の施設カードを選択すると、結果パネルにメトリクスが表示されます。"}),i(_),g(v,_)},u=v=>{Se(v,{get items(){return e(n)},columns:"auto",gap:"lg",item:(F,P=ae)=>{var I=Ne(),k=l(I);Le(k,oe(()=>P().props)),i(I),g(F,I)},$$slots:{item:!0}})};S(M,v=>{e(s).length===0?v(o):v(u,!1)})}i(w),i(p),i(h),i(f),g(a,f),E()}var qe=x('<meta name="description" content="共愛会の4施設（戸畑共立病院、戸畑リハビリテーション病院、あやめの里、明治町クリニック）の経営指標を一元管理"/>'),Je=x('<nav aria-label="ボードナビゲーション" class="sticky-header-nav border-default bg-card/95 border-b px-4 md:px-8"><div class="flex items-stretch justify-between gap-2 md:gap-3"><!></div></nav>'),Qe=x('<header class="border-divider bg-card border-b px-4 py-3 shadow-sm sm:px-6 lg:px-8"><div class="flex flex-wrap items-center justify-between gap-3 sm:gap-4"><div class="flex flex-col gap-1"><h1 class="text-primary text-xl font-bold">共愛会 施設ダッシュボード</h1> <p class="text-tertiary text-sm">法人全体の経営指標を一元管理</p></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-wrap items-center gap-2 sm:gap-3"><!> <!></div> <button type="button" class="border-default bg-card text-secondary hover-bg-subtle rounded-md border px-3 py-1.5 text-sm font-medium">すべて解除</button></div></div></header>'),Xe=x("<!> <!> <!>",1);function yt(a,t){B(t,!0);const d=b(()=>t.data.facilities),r=b(()=>t.data.navItems);let s=N("previous"),c=N(!0);const n=be(xe([],{displayDays:14}));re(()=>{n.setFacilities(e(d))});function f(){n.toggleComparisonType()}function h(){n.clearAllSelections()}var m=Xe();de("89g097",o=>{var u=qe();ie(()=>{se.title="共愛会 施設ダッシュボード"}),g(o,u)});var p=A(m);me(p,{onVisibilityChange:o=>{K(c,o,!0)}});var y=C(p,2);{var w=o=>{var u=Je(),v=l(u),_=l(v);ne(_,{get navItems(){return e(r)}}),i(v),i(u),g(o,u)};S(y,o=>{e(c)||o(w)})}var M=C(y,2);Ae(M,{stickyHeader:!0,headerZIndex:50,header:u=>{var v=Qe(),_=l(v),F=C(l(_),2),P=l(F),I=l(P);ce(I,{get value(){return e(s)},onchange:G=>{K(s,G,!0)}});var k=C(I,2);ve(k,{get value(){return n.comparisonType},onclick:f}),i(P);var j=C(P,2);j.__click=h,i(F),i(_),i(v),g(u,v)},children:(u,v)=>{Ye(u,{})},$$slots:{header:!0,default:!0}}),g(a,m),E()}le(["click"]);export{yt as component,ht as universal};
